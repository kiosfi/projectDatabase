<section data-ng-controller="ProjectsController"
         data-ng-init="findOneForIntReport()" class="report-body">
    <table>
        <tr>
            <td style="width: 50%">
                <img src="/theme/assets/img/kios_logo_public.gif" alt="KIOS"
                     style="float: left">
            </td>
            <td>
                <table>
                    <tr>
                        <td class="report-mini-header">
                            {{report.reportNumber}}. väliraportti
                        </td>
                    </tr>
                    <tr>
                        <td class="report-mini-header">Esittelijä</td>
                        <td class="report-content">
                            {{project.coordinator}}
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
    <hr>
    <article class="col-md-12 border-body">
        <table>
            <tr>
                <td class="report-mini-header">Järjestö</td>
                <td class="report-content">{{project.organisation.name}}</td>
                <td class="report-mini-header">Hanke</td>
                <td class="report-content">{{project.title}}</td>
            </tr>
            <tr>
                <td class="report-mini-header">Hankenumero</td>
                <td class="report-content">{{project.project_ref}}</td>
                <td class="report-mini-header">Alue&nbsp;/&nbsp;Maa</td>
                <td class="report-content">{{project.region}}&nbsp;</td>
            </tr>
        </table>
    </article>
    <table>
        <tr><td colspan="2">&nbsp;</td></tr>
        <tr>
            <td class="report-header">Hanke</td>
            <td>
                <div style="margin-bottom: 1em">
                    <div class="report-mini-header">
                        Päätavoitteet
                    </div>
                    <div class="report-subcontent" style="margin-bottom: 1em">
                        <em>Suunnitellut: </em>
                        {{project.project_goal}}
                    </div>
                    <div class="report-subcontent">
                        <em>Toteutuneet: </em>
                        <!-- For some reason, the value of this field is an
                        array. -->
                        {{report.objectives[0]}}
                    </div>
                </div>
                <div style="margin-bottom: 1em">
                    <div class="report-mini-header">
                        Toiminnot
                    </div>
                    <ul>
                        <li ng-repeat="method in project.methods"
                            style="padding-bottom: 1em">
                            <p><em>{{method.name}} ({{method.level}})</em></p>
                            <p class="report-subcontent"><em>Suunnitellut:</em>
                                {{method.comment}}</p>
                            <p class="report-subcontent"><em>Toteutuneet:</em>
                                {{report.methods[project.methods.indexOf(method)]}}</p>
                        </li>
                    </ul>
                </div>
                <div style="margin-bottom: 1em">
                    <div class="report-mini-header">
                        Raportointi ja yhteydenpito
                    </div>
                    <div class="report-subcontent">
                        {{report.communication}}
                    </div>
                </div>
                <div style="margin-bottom: 1em">
                    <div class="report-mini-header">
                        Evaluointi ja vaikuttavuuden arviointi
                    </div>
                    <div class="report-subcontent">
                        {{report.evaluation}}
                    </div>
                </div>
                <div style="margin-bottom: 2em">
                    <div class="report-mini-header">
                        Budjetin toteutuminen ja raportoitu summa
                    </div>
                    <div class="report-subcontent">{{report.budget}}</div>
                </div>
                <div style="margin-bottom: 1em">
                    <div class="report-mini-header">Maksatukset</div>
                    <div class="report-subcontent">
                        Hankkeelle myönnettiin
                        {{project.approved.granted_sum_eur| currency : ""}} EUR
                        hallituksen kokousessa
                        {{project.approved.board_notified| date : 'dd.MM.yyyy': 'UTC'}}.</div>
                    <div class="report-subcontent" style="margin-bottom: 1em">
                        Sopimus allekirjoitettiin
                        {{project.signed.signed_date| date: 'dd.MM.yyyy': 'UTC'}}.
                    </div>

                </div>
                <div style="margin-bottom: 1em">
                    <div class="report-mini-header">Maksusuunnitelma</div>
                    <ol>
                        <li ng-repeat="planned_payment in project.signed.planned_payments">
                            Erä: {{planned_payment.sum_eur| currency : ""}} EUR.
                            Suunniteltu maksupvm
                            {{planned_payment.date| date : 'dd.MM.yyyy': 'UTC'}}
                        </li>
                    </ol>
                </div>
                <div style="margin-bottom: 1em">
                    <div class="report-mini-header">Maksetut erät</div>
                    <ul>
                        <li   ng-repeat="payment in project.payments">
                            {{payment.sum_eur| currency : ""}} EUR; maksettu
                            {{payment.payment_date| date : 'dd.MM.yyyy': 'UTC'}}
                        </li>
                    </ul>
                </div>
                <div style="margin-bottom: 2em">
                    <div class="report-mini-header">Jäljellä oleva summa</div>
                    <div class="report-subcontent">
                        {{project.funding.left_eur| currency : ""}} EUR
                    </div>
                </div>
                <!--                <div style="margin-bottom: 1em">
                                    <div class="report-mini-header">
                                        Hankkeen suunniteltujen tavoitteiden ja toimintojen
                                        toteutuminen
                                    </div>
                                    <ol>
                                        <li ng-repeat="method in project.methods">
                                            <p><em>{{method.name}} ({{method.level}})</em></p>
                                            <p>Kuvaus: {{method.comment}}</p>
                                        </li>
                                    </ol>
                                </div>-->
                <!--                <div style="margin-bottom: 1em">
                                    <div class="report-mini-header">
                                        Budjetin toteutuminen ja raportoitu summa
                                    </div>
                                </div>-->
                <div style="margin-bottom: 1em">
                    <div class="report-mini-header">KIOS:in arvio</div>
                    <div class="report-subcontent">
                        {{report.overall_rating_kios}}
                    </div>
                </div>
                <div style="margin-bottom: 1em">
                    <div class="report-mini-header">Päätös</div>
                    <div class="report-subcontent">{{report.comments}}</div>
                </div>
            </td>
        </tr>
    </table>
</section>
