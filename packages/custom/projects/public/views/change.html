
<!--
A form for project state change.
-->
<section data-ng-controller="ProjectsController" data-ng-init="findOne()">
    <article class="col-md-12">
        <h2><span>{{project.project_ref}}: {{project.title}}</span></h2>

        <h3>{{fieldNames["coordinator"]}}:
            <a href="">{{project.coordinator}}</a>
            <span class="tila">{{project.state}}</span>
        </h3>
    </article>

    <article class="col-md-12">
        Hankkeen siirto tilasta "{{project.state}}" tilaan "{{global.newState}}"
    </article>

    <article class="col-md-12">
        <div class="col-md-5 proj-article" style="margin: 0.5em">
            <h4>Hanke</h4>
            <div class="col-md-12">
                <div class="col-md-6 mini-header">{{fieldNames["dac"]}}</div>
                <div class="col-md-6">{{project.dac}}&nbsp;</div>
                <div class="col-md-6 mini-header">
                    {{fieldNames["reg_date"]}}
                </div>
                <div class="col-md-6">
                    {{project.reg_date| date:'dd.MM.yyyy'}}
                </div>
                <div ng-show="project.approved.granted_sum_eur" class="ng-hide">
                    <div
                        class="col-md-6 mini-header">
                        Myönnetty avustus
                        <!--{{fieldNames["approved_granted_sum_eur"]}}-->
                    </div>
                    <div class="col-md-6">
                        {{project.approved.granted_sum_eur| currency : ""}} EUR
                    </div>
                </div>
                <div ng-show="!project.approved.granted_sum_eur" class="ng-hide">
                    <div class="col-md-6 mini-header">
                        Haettu avustus
                    </div>
                    <div class="col-md-6">
                        {{project.funding.applied_curr_eur| currency : ""}} EUR
                        ({{project.funding.applied_curr_local| currency : ""}}
                        paikallinen)
                    </div>
                </div>
                <div class="col-md-6 mini-header">Kesto</div>
                <div class="col-md-6">{{project.duration_months}} kk</div>
            </div>
        </div>
        <div class="col-md-5 proj-article" style="margin: 0.5em">
            <h4>Järjestö</h4>
            <div class="col-md-12">
                <div class="col-md-3 mini-header">Nimi</div>
                <div class="col-md-9">{{project.organisation.name}}</div>
                <div class="col-md-3 mini-header">Edustaja</div>
                <div class="col-md-9">
                    {{project.organisation.representative.name}}<br>
                    {{project.organisation.representative.email}}<br>
                    {{project.organisation.representative.phone}}
                </div>
            </div>
        </div>

        <div class="col-md-12 proj-article" style="margin: 0.5em">
            <h4>Kuvaus</h4>
            <div>
                {{project.description}}
            </div>
        </div>
    </article>

    <article class="col-md-12 proj-article">
        <!--    Käsittelyssä -->
        <form name="inReviewForm" class="form-horizontal col-md-8"
              ng-show="global.newState === 'käsittelyssä'" role="form"
              data-ng-submit="addReviewState(inReviewForm.$valid)" novalidate>
            <div class="form-group col-md-12">
                <div class="col-md-2">
                    <label>Vaaditut liitteet</label>
                </div>
                <div class="col-md-10">
                    <div class="col-md-10">
                        <span class="col-md-5">
                            <label for="proj_budget" >Hankebudjetti</label>
                        </span>
                        <span class="col-md-5">
                            <input type="checkbox" id="proj_budget"
                                   name="proj_budget"
                                   ng-model="project.required_appendices.proj_budget">
                        </span>
                    </div>
                    <div class="col-md-10">
                        <span class="col-md-5">
                            <label for="references">Suositukset</label>
                        </span>
                        <span class="col-md-5">
                            <input type="checkbox" id="references" name="references"
                                   ng-model="project.required_appendices.references">
                        </span>
                    </div>
                    <div class="col-md-10">
                        <span class="col-md-5">
                            <label for="annual_budget">Vuosibudjetti</label>
                        </span>
                        <span class="col-md-5">
                            <input type="checkbox" id="annual_budget"
                                   name="annual_budget"
                                   ng-model="project.required_appendices.annual_budget">
                        </span>
                    </div>
                    <div class="col-md-10">
                        <span class="col-md-5">
                            <label for="rules">Säännöt</label>
                        </span>
                        <span class="col-md-5">
                            <input type="checkbox" id="rules" name="rules"
                                   ng-model="project.required_appendices.rules">
                        </span>
                    </div>
                    <div class="col-md-10">
                        <span class="col-md-5">
                            <label for="reg_cert">
                                Rekisteröintitodistus
                            </label>
                        </span>
                        <span class="col-md-5">
                            <input type="checkbox" id="reg_cert" name="reg_cert"
                                   ng-model="project.required_appendices.reg_cert">
                        </span>
                    </div>
                    <div class="col-md-10">
                        <span class="col-md-5">
                            <label for="annual_report">Vuosikertomus</label>
                        </span>
                        <span class="col-md-5">
                            <input type="checkbox" id="annual_report"
                                   name="annual_report"
                                   ng-model="project.required_appendices.annual_report">
                        </span>
                    </div>
                    <div class="col-md-10">
                        <span class="col-md-5">
                            <label for="audit_reports">
                                Tilintarkastukset
                            </label>
                        </span>
                        <span class="col-md-5">
                            <input type="checkbox" id="audit_reports"
                                   name="audit_reports"
                                   ng-model="project.required_appendices.audit_reports">
                        </span>
                    </div>
                </div>
                <label for="comments" class="col-md-2 control-label">
                    Kommentit
                </label>
                <div class="col-md-10">
                    <textarea name="comments" type="text" class="form-control"
                              data-ng-model="project.in_review.comments"
                              id="comments" placeholder="Siirretty käsittelyyn">
                    </textarea>
                </div>
            </div>
            <div class="form-group">
                <div class="col-md-offset-2 col-md-10">
                    <button type="submit" id="review-btn" class="btn btn-default">
                        Tallenna
                    </button>
                </div>
            </div>
        </form>

        <!--        Hyväksytty-->

        <form name="approvedForm" class="form-horizontal col-md-8"
              ng-show="global.newState === 'hyväksytty'" role="form"
              data-ng-submit="addApprovedState(approvedForm.$valid)" novalidate>
            <div class="form-group col-md-12">
                <label class="col-md-2" for="board_meeting">
                    Hallituksen kokous
                </label>
                <div class="col-md-4">
                    <input id="board_meeting" name="board_meeting"
                           data-ng-model="project.approved.board_meeting"
                           class="form-control"
                           placeholder="Hallituksen kokous">
                </div>
            </div>
            <div class="form-group col-md-12">
                <label class="col-md-2" for="decision">
                    Päätös
                </label>
                <div class="col-md-10">
                    <textarea id="decision" name="decision"
                              data-ng-model="project.approved.decision"
                              class="form-control" placeholder="Päätös">
                    </textarea>
                </div>
            </div>
            <div class="form-group col-md-12">
                <label for="approved_date" class="col-md-2">
                    Hyväksymispvm
                </label>
                <div class="col-md-2" style="float:left;"
                     ng-class="{'has-error': approvedForm.approved_day.$invalid}">
                    <input name="approved_day" type="number" class="form-control"
                           data-ng-model="approved_day" id="approved_day"
                           placeholder="p">
                    <div ng-show="approvedForm.approved_day.$invalid"
                         class="help-block">
                        <p ng-show="approvedForm.approved_day.$error.number">
                            Päivän täytyy olla numero
                        </p>
                    </div>
                </div>
                <div class="col-md-2" style="float:left;"
                     ng-class="{'has-error': approvedForm.approved_month.$invalid}">
                    <input name="approved_month" type="number" class="form-control"
                           data-ng-model="approved_month" id="approved_month"
                           placeholder="k">
                    <div ng-show="approvedForm.approved_month.$invalid"
                         class="help-block">
                        <p ng-show="approvedForm.approved_month.$error.number">
                            Kuukauden täytyy olla numero
                        </p>
                    </div>
                </div>
                <div class="col-md-2" style="float:left;"
                     ng-class="{'has-error': approvedForm.approved_year.$invalid }">
                    <input name="approved_year" type="number" class="form-control"
                           data-ng-model="approved_year" id="approved_year"
                           placeholder="vvvv">
                    <div ng-show="approvedForm.approved_year.$invalid"
                         class="help-block">
                        <p ng-show="approvedForm.approved_year.$error.number">
                            Vuoden täytyy olla numero
                        </p>
                    </div>
                </div>
                <div style="clear:both;">&nbsp;</div>
            </div>
            <div class="form-group col-md-12"
                 ng-class="{'has-error': approvedForm.approved_by.$invalid}">
                <label for="approved_by" class="col-md-2">Hyväksyjä</label>
                <div class="col-md-10">
                    <select id="approved_by"
                            data-ng-model="project.approved.approved_by"
                            class='form-control'>
                        <option>Toiminnanjohtaja</option>
                        <option>Hallituksen kokous</option>
                        <option>UM</option>
                    </select>
                </div>
            </div>
            <div class="form-group col-md-12">
                <label for="board_notified" class="col-md-2">
                    Tiedoksiannon päivämäärä
                </label>
                <div class="col-md-2" style="float:left;" ng-class="{
                    'has-error'
                        :  approvedForm.board_notified_day.$invalid }">
                    <input name="board_notified_day" type="number"
                           class="form-control" data-ng-model="notified_day"
                           id="board_notified_day" placeholder="p">
                    <div ng-show="approvedForm.board_notified_day.$invalid"
                         class="help-block">
                        <p ng-show="approvedForm.board_notified_day.$error.number">
                            Päivän täytyy olla numero
                        </p>
                    </div>
                </div>
                <div class="col-md-2" style="float:left;" ng-class="{
                    'has-error'
                            :  approvedForm.board_notified_month.$invalid }">
                    <input name="board_notified_month" type="number"
                           class="form-control" data-ng-model="notified_month"
                           id="board_notified_month" placeholder="k">
                    <div ng-show="approvedForm.board_notified_month.$invalid"
                         class="help-block">
                        <p ng-show="approvedForm.board_notified_month.$error.number">
                            Kuukauden täytyy olla numero
                        </p>
                    </div>
                </div>
                <div class="col-md-2" style="float:left;" ng-class="{
                    'has-error'
                            :  approvedForm.board_notified_year.$invalid }">
                    <input name="board_notified_year" type="number"
                           class="form-control" data-ng-model="notified_year"
                           id="board_notified_year" placeholder="vvvv">
                    <div ng-show="approvedForm.board_notified_year.$invalid"
                         class="help-block">
                        <p ng-show="approvedForm.board_notified_year.$error.number">
                            Vuoden täytyy olla numero
                        </p>
                    </div>
                </div>
                <div style="clear:both;">&nbsp;</div>
            </div>
            <div class="form-group col-md-12">
                <label for="granted_sum_eur" class="col-md-2 control-label">
                    Myönnetty summa (euro)
                </label>

                <div class="col-md-3" ng-class="{
                    'has-error'
                            :  approvedForm.granted_sum_eur.$invalid }">
                    <input name="granted_sum_eur" type="number"
                           class="form-control"
                           data-ng-model="project.approved.granted_sum_eur"
                           id="granted_sum_eur" placeholder="0">
                    <div ng-show="approvedForm.granted_sum_eur.$invalid"
                         class="help-block">
                        <p ng-show="approvedForm.granted_sum_eur.$error.number">
                            Summan täytyy olla numero
                        </p>
                    </div>
                </div>
            </div>

            <div class="form-group col-md-12">
                <label mean-token="'create-themes'" class="col-md-2">
                    Teemat
                </label>
                <div class="col-md-12">
                    <table>
                        <tr ng-repeat="theme in themes">
                            <td><input
                                    type="checkbox"
                                    name="selectedThemes[]"
                                    value="{{theme}}"
                                    ng-checked="themeSelection.indexOf(theme) > -1"
                                    ng-click="toggleThemeSelection(theme)">
                                {{theme}}
                            </td>
                        </tr>
                    </table>
                </div>
            </div>

            <div class="form-group">
                <div class="col-md-offset-2 col-md-10">
                    <button id="appr-btn" type="submit" class="btn btn-default">
                        Tallenna
                    </button>
                </div>
            </div>
        </form>


        <!--    Hylätty-->

        <form name="rejectedForm" class="form-horizontal col-md-8"
              ng-show="global.newState === 'hylätty'"  role="form"
              data-ng-submit="addRejectedState(rejectedForm.$valid)" novalidate>
            <div class="form-group col-md-12">
                <label mean-token="'create-rejcategories'" class="col-md-3">
                    Syyt
                </label>

                <div class="col-md-12" id="rejSelection"
                     data-ng-repeat="rej in addedRejections">
                    <select name="rejSelect" id="rejSelect"
                            data-ng-model="rej.rejection">
                        <option data-ng-repeat="rejCat in rejcategories"
                                value="{{rejCat}}">{{rejCat}}</option>
                    </select>
                </div>

                <div class="col-md-12">
                    <input id="addRej" type="button" value="Lisää uusi"
                           ng-click="addRejection();"/>
                    <input id="remRej" type="button" value="Poista viimeinen"
                           ng-click="removeRejection();"/>
                </div>
            </div>

            <div class="form-group col-md-12">
                <label for="comments" class="col-md-2">Kommentit</label>
                <div class="col-md-10">
                    <textarea name="comments" type="text" class="form-control"
                              data-ng-model="project.rejected.rejection_comments"
                              id="comments"
                              placeholder="Kommentit hylkäysperusteille">
                    </textarea>
                </div>
            </div>


            <div class="form-group">
                <div class="col-md-offset-2 col-md-10">
                    <button id="rej-btn" type="submit" class="btn btn-default">
                        Tallenna
                    </button>
                </div>

            </div>
        </form>


        <!--Allekirjoitettu-->


        <form name="signedForm" class="form-horizontal col-md-8"
              ng-show="global.newState === 'allekirjoitettu'"  role="form"
              data-ng-submit="addSignedState(signedForm.$valid)" novalidate>

            <div class="form-group col-md-12">
                <label for="signed_by" class="col-md-2">Allekirjoittaja</label>
                <div class="col-md-10">
                    <input name="signed_by" type="text" class="form-control"
                           data-ng-model="project.signed.signed_by"
                           id="signed_by"
                           placeholder="Sopimuksen allekirjoittajan nimi"
                           required>
                </div>

            </div>

            <div class="form-group col-md-12">
                <label for="signed_date_day" class="col-md-2">Päivämäärä</label>
                <div class="col-md-2" style="float:left;" ng-class="{
                    'has-error'
                            :  signedForm.signed_date_day.$invalid }">
                    <input name="signed_date_day" type="number"
                           class="form-control" data-ng-model="signed_day"
                           id="signed_date_day" placeholder="p">
                    <div ng-show="signedForm.signed_date_day.$invalid"
                         class="help-block">
                        <p ng-show="signedForm.signed_date_day.$error.number">
                            Päivän täytyy olla numero
                        </p>
                    </div>
                </div>
                <div class="col-md-2" style="float:left;" ng-class="{
                    'has-error'
                            :  signedForm.signed_date_month.$invalid }">
                    <input name="signed_date_month" type="number"
                           class="form-control" data-ng-model="signed_month"
                           id="signed_date_month" placeholder="k">
                    <div ng-show="signedForm.signed_date_month.$invalid"
                         class="help-block">
                        <p ng-show="signedForm.signed_date_month.$error.number">
                            Kuukauden täytyy olla numero
                        </p>
                    </div>
                </div>
                <div class="col-md-2" style="float:left;" ng-class="{
                    'has-error'
                            :  signedForm.signed_date_year.$invalid }">
                    <input name="signed_date_year" type="number"
                           class="form-control" data-ng-model="signed_year"
                           id="signed_date_year" placeholder="vvvv">
                    <div ng-show="signedForm.signed_date_year.$invalid"
                         class="help-block">
                        <p ng-show="signedForm.signed_date_year.$error.number">
                            Vuoden täytyy olla numero
                        </p>
                    </div>
                </div>
                <div style="clear:both;">&nbsp;</div>
            </div>

            <label for="plannedPaymentSelection" class="col-md-3">
                Maksusuunnitelma
            </label>
            <div class="form-group col-md-12"><p>Myönnetty summa:
                    {{project.approved.granted_sum_eur| currency : ""}} €</p>
            </div>
            <div class="form-group col-md-12" id="plPayments">
                <div class="col-md-12" name="plannedPaymentSelection"
                     id="plannedPaymentSelection"
                     data-ng-repeat="plannedPayment in plannedPayments">
                    <div>
                        <label for="plannedDay" class="col-md-2 control-label">
                            Päivämäärä
                        </label>
                        <div class="col-md-2" style="float:left;">
                            <input name="plannedDay" type="number"
                                   class="form-control"
                                   data-ng-model="plannedPayment.day"
                                   id="plannedDay" placeholder="p">
                        </div>
                        <div class="col-md-2" style="float:left;">
                            <input name="plannedMonth" type="number"
                                   class="form-control"
                                   data-ng-model="plannedPayment.month"
                                   id="plannedMonth" placeholder="k">
                        </div>
                        <div class="col-md-2" style="float:left;">
                            <input name="plannedYear" type="number"
                                   class="form-control"
                                   data-ng-model="plannedPayment.year"
                                   id="plannedYear" placeholder="vvvv">
                        </div>
                    </div>
                    <div style="clear:both;">&nbsp;</div>
                    <div>
                        <label for="plannedSumEUR" class="col-md-2 control-label">
                            Summa (EUR)
                        </label>
                        <div class="col-md-5">
                            <input name="plannedSumEUR" type="number"
                                   class="form-control"
                                   data-ng-model="plannedPayment.sum_eur"
                                   id="plannedSumEUR" placeholder="Summa (EUR)">
                        </div>
                    </div>
                </div>

                <div class="col-md-12">
                    <input type="button" id="add-btn" value="Lisää uusi"
                           ng-click="addPlannedPayment();"/>
                    <input type="button" value="Poista viimeinen"
                           ng-click="removePlannedPayment();"/>
                </div>

            </div>

            <label for="reportDeadlines" class="col-md-3">
                Raporttien eräpäivät
            </label>
            <div class="form-group col-md-12">

                <div class="col-md-12" name="reportDeadlines"
                     id="reportDeadlines" data-ng-repeat="deadline in deadlines">
                    <label for="dlRep" class="col-md-2 control-label">
                        Raportti
                    </label>
                    <div class="col-md-5" style="float:left;">
                        <input name="dlRep" type="text" class="form-control"
                               data-ng-model="deadline.report" id="dlRep"
                               placeholder="Raportti">
                    </div>
                    <div style="clear:both;">&nbsp;</div>
                    <div name="dlDate">
                        <label for="dlDay" class="col-md-2 control-label">
                            Eräpäivä
                        </label>
                        <div class="col-md-2">
                            <input name="dlDay" type="number"
                                   class="form-control"
                                   data-ng-model="deadline.day" id="dlDay"
                                   placeholder="p">
                        </div>
                        <div class="col-md-2" style="float:left;">
                            <input name="dlMonth" type="number"
                                   class="form-control"
                                   data-ng-model="deadline.month" id="dlMonth"
                                   placeholder="k">
                        </div>
                        <div class="col-md-2" style="float:left;">
                            <input name="dlYear" type="number"
                                   class="form-control"
                                   data-ng-model="deadline.year" id="dlYear"
                                   placeholder="vvvv">
                        </div>
                        <div style="clear:both;">&nbsp;</div>
                        <br>
                    </div>
                </div>

                <div class="col-md-12">
                    <input type="button" id="add-btn2" value="Lisää uusi"
                           ng-click="addDeadline();"/>
                    <input type="button" value="Poista viimeinen"
                           ng-click="removeDeadline();"/>
                </div>
            </div>

            <div class="form-group">
                <div class="col-md-offset-2 col-md-10">
                    <button type="submit" class="btn btn-default" id="sign-btn">
                        Tallenna
                    </button>
                </div>
            </div>
        </form>


        <!--    Väliraportti-->


        <form name="intReportForm" class="form-horizontal col-md-12"
              ng-show="global.newState === 'väliraportti'"  role="form"
              data-ng-submit="addIntReportState(intReportForm.$valid)"
              novalidate>
            <div class="form-group col-md-12">
                <label for="payments" class="col-md-2">Maksatukset</label>
                <p class="col-md-12 comment-form-div">Maksettu:</p>
                <div class="form-group col-md-12"
                     ng-repeat="payment in project.payments">
                    <div class="col-md-4">
                        {{payment.sum_eur| currency : ""}} EUR /
                        {{payment.payment_date| date : 'dd.MM.yyyy'}}
                    </div>
                </div>
            </div>
            <p class="col-md-12 strong-title comment-form-div">
                Toimintatavat ja niiden toteutuminen
            </p>
            <div class="form-group col-md-12" ng-repeat="method in project.methods">
                <div class="col-md-6" style="text-align: justify">
                    <p><em>{{method.name}}</em> ({{method.level}})</p>
                    <p ng-bind-html="handleEmphasis(method.comment)"></p>
                </div>
                <div class="col-md-6">
                    <p>&nbsp;</p>
                    <textarea name="intRMethods" type="text"
                              class="form-control"
                              data-ng-model="addedMethods[(project.methods).indexOf(method)]"
                              rows="10" cols="50"
                              id="intRMethods" placeholder="Kommentteja"></textarea>
                </div>
            </div>
            <p class="col-md-12 strong-title comment-form-div">
                Tavoitteet ja niiden toteutuminen
            </p>
            <div class="form-group col-md-12">
                <div class="col-md-6" style="text-align: justify">
                    <p ng-bind-html="handleEmphasis(project.project_goal)"></p>
                </div>
                <div class="col-md-6">
                    <textarea name="objComments" type="text"
                              class="form-control"
                              data-ng-model="objectiveComments[0]"
                              id="objComments"
                              rows="10" cols="50"
                              placeholder="Kommentteja tavoitteiden toteutumisesta">
                    </textarea>
                </div>
            </div>
            <div class="form-group col-md-12">
                <label for="communication" class="col-md-4">
                    Raportointi ja yhteydenpito
                </label>
                <div class="col-md-8">
                    <textarea name="communication" type="text"
                              class="form-control"
                              data-ng-model="project.intermediary_report.communication"
                              id="communication"
                              placeholder="Raportointi ja yhteydenpito">
                    </textarea>
                </div>
            </div>
            <div class="form-group col-md-12">
                <label for="evaluation" class="col-md-4">
                    Evaluointi ja vaikuttavuuden arviointi
                </label>
                <div class="col-md-8">
                    <textarea name="evaluation" type="text"
                              class="form-control"
                              data-ng-model="project.intermediary_report.evaluation"
                              id="evaluation"
                              placeholder="Evaluointi ja vaikuttavuuden arviointi">
                    </textarea>
                </div>
            </div>
            <div class="form-group col-md-12">
                <label for="budget" class="col-md-4">
                    Budjetin toteutuminen ja raportoitu summa
                </label>
                <div class="col-md-8">
                    <textarea name="budget" type="text"
                              class="form-control"
                              data-ng-model="project.intermediary_report.budget"
                              id="budget"
                              placeholder="Budjetin toteutuminen ja raportoitu summa">
                    </textarea>
                </div>
            </div>
            <div class="form-group col-md-12">
                <label for="overallKios" class="col-md-2">
                    KIOS:in kokonaisarvio
                </label>
                <div class="col-md-10">
                    <textarea name="overallKios" type="text"
                              class="form-control"
                              data-ng-model="project.intermediary_report.overall_rating_kios"
                              id="overallKios" placeholder="KIOS:in arvio">
                    </textarea>
                </div>
            </div>
            <div class="form-group col-md-12">
                <label for="comments" class="col-md-2">Päätös</label>
                <div class="col-md-10">
                    <textarea name="intRComments" type="text"
                              class="form-control"
                              data-ng-model="project.intermediary_report.comments"
                              id="intRcomments"
                              placeholder="Päätös"></textarea>
                </div>
            </div>
            <div class="form-group col-md-12">
                <label for="intRDateAppr" class="col-md-2">Hyväksymispvm</label>

                <div class="col-md-2" style="float:left;" ng-class="{
                    'has-error'
                        :  intReportForm.intRDateAppr_day.$invalid }">
                    <input name="intRDateAppr_day" type="number"
                           class="form-control" data-ng-model="intRDateAppr_day"
                           id="intRDateAppr_day" placeholder="p">
                    <div ng-show="intReportForm.intRDateAppr_day.$invalid"
                         class="help-block">
                        <p ng-show="intReportForm.intRDateAppr_day.$error.number">
                            Päivän täytyy olla numero
                        </p>
                    </div>
                </div>
                <div class="col-md-2" style="float:left;" ng-class="{
                    'has-error':  intReportForm.intRDateAppr_month.$invalid }">
                    <input name="intRDateAppr_month" type="number"
                           class="form-control" data-ng-model="intRDateAppr_month"
                           id="intRDateAppr_month" placeholder="k">
                    <div ng-show="intReportForm.intRDateAppr_month.$invalid"
                         class="help-block">
                        <p ng-show="intReportForm.intRDateAppr_month.$error.number">
                            Kuukauden täytyy olla numero
                        </p>
                    </div>
                </div>
                <div class="col-md-2" style="float:left;" ng-class="{
                    'has-error'
                            :  intReportForm.intRDateAppr_year.$invalid }">
                    <input name="intRDateAppr_year" type="number"
                           class="form-control"
                           data-ng-model="intRDateAppr_year"
                           id="intRDateAppr_year" placeholder="vvvv">
                    <div ng-show="intReportForm.intRDateAppr_year.$invalid"
                         class="help-block">
                        <p ng-show="intReportForm.intRDateAppr_year.$error.number">
                            Vuoden täytyy olla numero
                        </p>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="col-md-offset-2 col-md-10">
                    <button id="intrep-btn" type="submit" class="btn btn-default">
                        Tallenna
                    </button>
                </div>
            </div>
        </form>

        <!--   Loppuraportti-->

        <form name="endReportForm" class="form-horizontal col-md-12"
              ng-show="global.newState === 'loppuraportti'" role="form"
              data-ng-submit="addEndReportState(endReportForm)" novalidate>
            <div class="form-group col-md-12">
                <label for="end_budget" class="col-md-4">
                    Budjetin toteutuminen ja raportoitu summa
                </label>
                <div class="col-md-8">
                    <textarea name="end_budget" type="text"
                              class="form-control"
                              data-ng-model="project.end_report.budget"
                              id="end_budget"
                              placeholder="Budjetin toteutuminen ja raportoitu summa">
                    </textarea>
                </div>
            </div>
            <div class="form-group col-md-12">
                <label for="audit_date" class="col-md-2">
                    Tilintarkastuspvm
                </label>
                <div class="col-md-2" style="float:left;"
                     ng-class="{'has-error': endReportForm.audit_day.$invalid }">
                    <input name="audit_day" type="number" class="form-control"
                           data-ng-model="audit_day" id="audit_day"
                           placeholder="p">
                    <div ng-show="endReportForm.audit_day.$invalid"
                         class="help-block">
                        <p ng-show="endReportForm.audit_day.$error.number">
                            Päivän täytyy olla numero
                        </p>
                    </div>
                </div>
                <div class="col-md-2" style="float:left;"
                     ng-class="{'has-error':  endReportForm.audit_month.$invalid }">
                    <input name="audit_month" type="number" class="form-control"
                           data-ng-model="audit_month" id="audit_month"
                           placeholder="k">
                    <div ng-show="endReportForm.audit_month.$invalid"
                         class="help-block">
                        <p ng-show="endReportForm.audit_month.$error.number">
                            Kuukauden täytyy olla numero
                        </p>
                    </div>
                </div>
                <div class="col-md-2" style="float:left;"
                     ng-class="{'has-error': endReportForm.audit_year.$invalid }">
                    <input name="audit_year" type="number" class="form-control"
                           data-ng-model="audit_year" id="audit_year"
                           placeholder="vvvv">
                    <div ng-show="endReportForm.audit_year.$invalid"
                         class="help-block">
                        <p ng-show="endReportForm.audit_year.$error.number">
                            Vuoden täytyy olla numero
                        </p>
                    </div>
                </div>
            </div><div class="form-group col-md-12">
                <label for="audit_review" class="col-md-2">
                    Tilintarkastuksen Arvio
                </label>
                <div class="col-md-8">
                    <textarea name="audit_review" type="text"
                              class="form-control"
                              data-ng-model="project.end_report.audit.review"
                              id="audit_review"
                              placeholder="Arvio tilintarkastuksesta">
                    </textarea>
                </div>
            </div>
            <p class="col-md-12 strong-title comment-form-div">
                Toimintatavat ja niiden toteutuminen
            </p>
            <div class="form-group col-md-12"
                 ng-repeat="method in project.methods">
                <div class="col-md-6" style="text-align: justify">
                    <p><em>{{method.name}}</em> ({{method.level}})</p>
                    <p ng-bind-html="handleEmphasis(method.comment)"></p>
                </div>
                <div class="col-md-6">
                    <p>&nbsp;</p>
                    <textarea name="er_methods" type="text"
                              class="form-control"
                              data-ng-model="project.end_report.methods[project.methods.indexOf(method)]"
                              rows="10" cols="50"
                              id="er_methods" placeholder="Kommentteja">
                    </textarea>
                </div>
            </div>
            <p class="col-md-12 strong-title comment-form-div">
                Kokonaistavoitteen toteutuminen
            </p>
            <div class="form-group col-md-12">
                <div class="col-md-6" style="text-align: justify">
                    <p ng-bind-html="handleEmphasis(project.project_goal)"></p>
                </div>
                <div class="col-md-6">
                    <textarea name="objectivesComments" type="text"
                              class="form-control"
                              data-ng-model="project.end_report.objective"
                              id="objectivesComments" rows="10" cols="50"
                              placeholder="Kokonaistavoitteen toteutuminen">
                    </textarea>
                </div>
            </div>
            <div class="form-group col-md-12">
                <div class="col-md-4">
                    <label for="direct_beneficiaries">
                        Suoria hyödynsaajia (arvio)
                    </label>
                </div>
                <div class="col-md-2">
                    <input id="direct_beneficiaries" name="direct_beneficiaries"
                           class="form-control"
                           data-ng-model="project.end_report.direct_beneficiaries">
                </div>
                <div class="col-md-4">
                    <label for="direct_beneficiaries">
                        Epäsuoria hyödynsaajia (arvio)
                    </label>
                </div>
                <div class="col-md-2">
                    <input id="indirect_beneficiaries"
                           name="indirect_beneficiaries" class="form-control"
                           data-ng-model="project.end_report.indirect_beneficiaries">
                </div>
            </div>
            <div class="form-group col-md-12">
                <label for="grade" class="col-md-4">
                    Numeerinen arvio
                </label>
                <div class="col-md-4">
                    <select name="grade" id="grade"
                            data-ng-model="project.end_report.grade"
                            class="form-control">
                        <option value="" selected></option>
                        <option value="4">4 (Onnistui yli odotusten)</option>
                        <option value="4">3 (Onnistui suunnitellusti)</option>
                        <option value="4">
                            2 (Onnistui alle odotusten, ulkoinen syy)
                        </option>
                        <option value="4">
                            1 (Onnistui alle odotusten, järjestön syy)
                        </option>
                    </select>
                </div>
            </div>
            <div class="form-group col-md-12">
                <label for="gen_review" class="col-md-2">
                    KIOS:in kokonaisarvio
                </label>
                <div class="col-md-10">
                    <textarea name="gen_review" type="text"
                              class="form-control"
                              data-ng-model="project.end_report.general_review"
                              id="gen_review"
                              placeholder="KIOS:n kokonaisarvio">
                    </textarea>
                </div>
            </div>
            <div class="form-group col-md-12">
                <label for="proposition" class="col-md-2">
                    Esitys
                </label>
                <div class="col-md-10">
                    <textarea name="proposition" type="text"
                              class="form-control"
                              data-ng-model="project.end_report.proposition"
                              id="proposition" placeholder="Esitys">
                    </textarea>
                </div>
            </div>
            <div class="form-group col-md-12">
                <label for="conclusion" class="col-md-2">
                    Päätös
                </label>
                <div class="col-md-10">
                    <textarea name="conclusion" type="text" class="form-control"
                              data-ng-model="project.end_report.conclusion"
                              id="conclusion" placeholder="Päätös">
                    </textarea>
                </div>
            </div>
            <div class="form-group col-md-12">
                <label class="col-md-2" for="end_board_meeting">
                    Hallituksen kokous
                </label>
                <div class="col-md-4">
                    <input id="end_board_meeting" name="end_board_meeting"
                           data-ng-model="project.end_report.board_meeting"
                           class="form-control"
                           placeholder="Hallituksen kokous">
                </div>
            </div>
            <div class="form-group col-md-12">
                <label for="audit_day" class="col-md-2">
                    Hyväksymispvm
                </label>
                <div class="col-md-2" style="float:left;"
                     ng-class="{
                                 'has-error'
                                 :  projectEditForm.er_approved_day.$invalid}">
                    <input name="er_approved_day" type="number"
                           class="form-control"
                           data-ng-model="er_approved_day"
                           id="er_approved_day" placeholder="p" min="1">
                    <div ng-show="projectEditForm.er_approved_day.$invalid"
                         class="help-block">
                        <p ng-show="projectEditForm.er_approved_day.$error.number">
                            Päivän täytyy olla numero
                        </p>
                    </div>
                </div>
                <div class="col-md-2" style="float:left;"
                     ng-class="{
                                 'has-error'
                                 : projectEditForm.er_approved_month.$invalid}">
                    <input name="er_approved_month" type="number"
                           class="form-control"
                           data-ng-model="er_approved_month"
                           id="er_approved_month" placeholder="k" min="1">
                    <div ng-show="projectEditForm.er_approved_month.$invalid"
                         class="help-block">
                        <p ng-show="projectEditForm.er_approved_month.$error.number">
                            Kuukauden täytyy olla numero
                        </p>
                    </div>
                </div>
                <div class="col-md-2" style="float:left;"
                     ng-class="{
                                 'has-error'
                                 : projectEditForm.er_approved_year.$invalid}">
                    <input name="er_approved_year" type="number"
                           class="form-control"
                           data-ng-model="er_approved_year"
                           id="er_approved_year" placeholder="vvvv" min="1">
                    <div ng-show="projectEditForm.er_approved_year.$invalid"
                         class="help-block">
                        <p ng-show="projectEditForm.er_approved_year.$error.number">
                            Vuoden täytyy olla numero
                        </p>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="col-md-offset-10 col-md-12">
                    <button type="submit" id="er-btn" class="btn btn-default">
                        Tallenna
                    </button>
                </div>
            </div>
        </form>

        <!--Päättynyt-->

        <form name="endedForm" class="form-horizontal col-md-8"
              ng-show="global.newState === 'päättynyt'" role="form"
              data-ng-submit="addEndedState(endedForm.$valid)" novalidate>

            <div class="form-group col-md-12">
                <div>
                    <label for="endDay" class="col-md-2 control-label">
                        Päivämäärä
                    </label>
                    <div class="col-md-2" style="float:left;">
                        <input name="endDay" type="number" class="form-control"
                               data-ng-model="end_day" id="endDay" placeholder="p">
                    </div>
                    <div class="col-md-2" style="float:left;">
                        <input name="endMonth" type="number" class="form-control"
                               data-ng-model="end_month" id="endMonth" placeholder="k">
                    </div>
                    <div class="col-md-2" style="float:left;">
                        <input name="endYear" type="number" class="form-control"
                               data-ng-model="end_year" id="endYear" placeholder="vvvv">
                    </div>
                </div>
            </div>

            <div class="form-group col-md-12">
                <label for="approved_by" class="col-md-2"> Hyväksyjä</label>
                <div class="col-md-10">
                    <select id="approved_by"
                            data-ng-model="project.ended.approved_by"
                            class='form-control'>
                        <option value="toiminnanjohtaja">Toiminnanjohtaja</option>
                        <option value="hallitus">Hallitus</option>
                    </select>
                </div>
            </div>
            <div class="form-group col-md-12">
                <label for="notifiedDay" class="col-md-2">
                    Tiedoksiannnon päivämäärä
                </label>
                <div class="col-md-2" style="float:left;">
                    <input name="notifiedDay" type="number" class="form-control"
                           data-ng-model="end_notified_day" id="notifiedDay"
                           placeholder="p">
                </div>
                <div class="col-md-2" style="float:left;">
                    <input name="notifiedMonth" type="number" class="form-control"
                           data-ng-model="end_notified_month" id="notifiedMonth"
                           placeholder="k">
                </div>
                <div class="col-md-2" style="float:left;">
                    <input name="notifiedYear" type="number" class="form-control"
                           data-ng-model="end_notified_year" id="notifiedYear"
                           placeholder="vvvv">
                </div>
            </div>
            <div class="form-group col-md-12">
                <label for="comments" class="col-md-2">Muut kommentit</label>
                <div class="col-md-10">
                    <textarea name="comments" type="text" class="form-control"
                              data-ng-model="project.ended.other_comments"
                              id="comments"
                              placeholder="Muut päättämiseen liittyvät kommentit">
                    </textarea>
                </div>
            </div>
            <div class="form-group col-md-12">
                <div class="col-md-offset-2 col-md-10">
                    <button id="end-btn" type="submit" class="btn btn-default">
                        Tallenna
                    </button>
                </div>
            </div>
        </form>
        &nbsp;
    </article>
</section>
