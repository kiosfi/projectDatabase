
<!--
A form for project state change.
-->
<section data-ng-controller="ProjectsController" data-ng-init="findOne()">

    <h2><span class="name">{{project.project_ref}}: {{project.title}}</span>
    </h2>


    <h3>Koordinaattori: <a href="">{{project.coordinator}}</a>
        <span class="tila"><p>{{project.state}}</p></span></h3>

    <hr>

    <article class="proj-left">
        <h4 class="proj-header">Kuvaus</h4>
        <span class="proj-body">
            {{project.description}}
        </span>
    </article>

    <article class="proj-div">
        <h4 class="proj-header">Hanketiedot</h4>
        <section class="proj-body">
            <p>DAC: {{project.dac}}</p>
            <p>Kirjattu: {{project.reg_date| date:'dd.MM.yyyy'}}</p>
            <p ng-show="project.funding.granted_curr_eur" class="ng-hide">Myönnetty: {{project.funding.granted_curr_eur}} EUR ({{project.funding.granted_curr_local}} local)</p>
            <p ng-show="!project.funding.granted_curr_eur" class="ng-hide">Haettu: {{project.funding.applied_curr_eur}} EUR ({{project.funding.applied_curr_local}} local)</p>
            <p>Kesto: {{project.duration_months}} kk</p>
        </section>
    </article>

    <article class="proj-div">
        <h4 class="proj-header">Järjestö</h4>
        <section class="proj-body">
            <p>Nimi: {{project.organisation.name}}</p>
            <p>Edustaja: {{project.organisation.representative}}</p>
        </section>
    </article>

    <article class="change-box">

        <h3>Olet siirtämässä hanketta tilaan: <span class="change-state-title">{{global.newState}}</span> </h3>

        <p>Siirtääksesi hankkeen tilasta "{{project.state}}" tilaan "{{global.newState}}", täytä alle puuttuvat tiedot. Hankkeen muiden tietojen muuttaminen on tehtävä "muokkaus" lomakkeen kautta. </p>

    </article>


    <!--    Käsittelyssä -->


    <form name="inReviewForm" class="form-horizontal col-md-8" ng-show="global.newState === 'käsittelyssä'"  role="form" data-ng-submit="addReviewState(inReviewForm.$valid)" novalidate>

        <div class="form-group col-md-12">
            <label for="comments" class="col-md-2 control-label">Kommentit</label>
            <div class="col-md-10">
                <textarea name="comments" type="text" class="form-control" data-ng-model="project.in_review.comments" id="comments" placeholder="Siirretty käsittelyyn" required></textarea>
            </div>
        </div>

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <button type="submit" class="btn btn-default">Tallenna</button>
            </div>
        </div>
    </form>

    <!--        Hyväksytty-->


        <form name="approvedForm" class="form-horizontal col-md-8" ng-show="global.newState === 'hyväksytty'"  role="form" data-ng-submit="addApprovedState(approvedForm.$valid)" novalidate>

            <div class="form-group col-md-12">
                <label for="approved_date" class="col-md-2">Päivämäärä</label>
                <div class="col-md-10">
                    <input name="approved_date" type="text" class="form-control" data-ng-model="project.approved.approved_date" id="approved_date" placeholder="Hankkeen hyväksynnän pvm" required>
                </div>
            </div>

            <div class="form-group col-md-12">
                <label for="approved_by" class="col-md-2"> Hyväksyjä</label>
                <div class="col-md-10">
                    <select id="approved_by" data-ng-model="project.approved.approved_by" class='form-control'>
                        <option value="option-1">Toiminnanjohtaja</option>
                        <option value="option-2">Halko</option>
                        <option value="option-3">UM</option>
                    </select>
                </div>
            </div>

            <div class="form-group col-md-12">
                <label for="board_notified" class="col-md-2">Tiedoksiannnon päivämäärä</label>
                <div class="col-md-10">
                    <input name="board_notified" type="text" class="form-control" data-ng-model="project.approved.board_notified" id="board_notified" placeholder="Hallitukselle tiedoksi pvm" required>
                </div>
            </div>

            <div class="form-group col-md-12">
                <label for="granted_sum_eur" class="col-md-2 control-label">Myönnetty summa (euro)</label>
                <div class="col-md-4">
                    <input name="granted_sum_eur" type="text" class="form-control" data-ng-model="project.approved.granted_sum.granted_curr_eur" id="granted_sum_eur" placeholder="0" required>EUR
                </div>

                <label for="granted_sum_local" class="col-md-2 control-label">Myönnetty summa (paikallinen)</label>
                <div class="col-md-4">
                    <input name="granted_sum_local" type="text" class="form-control" data-ng-model="project.approved.granted_sum.granted_curr_local" id="granted_sum_local" placeholder="0" required>local
                </div>
            </div>

            <div class="form-group col-md-6">
                <label mean-token="'create-themes'" class="col-md-3 control-label">Teemat</label>
                <div class="col-md-12">
                    <label ng-repeat="theme in themes">
                        <input
                            type="checkbox"
                            name="selectedThemes[]"
                            value="{{theme}}"
                            ng-checked="themeSelection.indexOf(theme) > - 1"
                            ng-click="toggleThemeSelection(theme)"
                            > {{theme}}
                    </label>
                </div>
            </div>

            <div class="form-group col-md-12">
                <label mean-token="'create-methods'" class="col-md-3 control-label">Toimintatavat</label>
                <div class="col-md-12">
                    <label ng-repeat="method in methods">
                        <input
                            type="checkbox"
                            name="selectedMethods[]"
                            value="{{method}}"
                            ng-checked="methodSelection.indexOf(method) > - 1"
                            ng-click="toggleMethodSelection(method)"
                            > {{method}}
                    </label>
                </div>
            </div>

    <!--        <div class="form-group col-md-12">
                <label for="comments" class="col-md-2">Kommentit</label>
                <div class="col-md-10">
                    <textarea name="comments" type="text" class="form-control" data-ng-model="" id="comments" placeholder="Kommentteja" required></textarea>
                </div>
            </div>-->


            <div class="form-group">
                <div class="col-md-offset-2 col-md-10">
                    <button type="submit" class="btn btn-default">Tallenna</button>
                </div>
            </div>
    </form>


    <!--    Hylätty-->


    <form name="rejectedForm" class="form-horizontal col-md-8" ng-show="global.newState === 'hylätty'"  role="form" data-ng-submit="addRejectedState(rejectedForm.$valid)" novalidate>

      <div class="form-group col-md-12">
          <label mean-token="'create-rejcategories'" class="col-md-3 control-label">Syyt</label>
          <div class="col-md-12">
              <label ng-repeat="rej in rejcategories">
                  <input
                      type="checkbox"
                      name="selectedRejCategories[]"
                      value="{{rej}}"
                      ng-checked="rejectedCategorySelection.indexOf(rej) > - 1"
                      ng-click="toggleRejectedCategorySelection(rej)"
                     >{{rej}}
              </label>
          </div>
      </div>

        <div class="form-group col-md-12">
            <label for="comments" class="col-md-2">Kommentit</label>
            <div class="col-md-10">
                <textarea name="comments" type="text" class="form-control" data-ng-model="project.rejected.rejection_comments" id="comments" placeholder="Kommentit hylkäysperusteille" required></textarea>
            </div>
        </div>


        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <button type="submit" class="btn btn-default">Tallenna</button>
            </div>
        </div>
    </form>


    <!--Allekirjoitettu-->


    <form name="signedForm" class="form-horizontal col-md-8" ng-show="global.newState === 'allekirjoitettu'"  role="form" data-ng-submit="addSignedState(signedForm.$valid)" novalidate>

        <div class="form-group col-md-12">
            <label for="signed_by" class="col-md-2">Allekirjoittaja</label>
            <div class="col-md-10">
                <input name="signed_by" type="text" class="form-control" data-ng-model="project.signed.signed_by" id="signed_by" placeholder="Sopimuksen allekirjoittajan nimi" required>
            </div>
        </div>

        <div class="form-group col-md-12">
            <label for="signed_date" class="col-md-2">Päivämäärä</label>
            <div class="col-md-10">
                <input name="signed_date" type="text" class="form-control" data-ng-model="project.signed.signed_date" id="signed_date" placeholder="Allekirjoituksen pvm" required>
            </div>
        </div>


        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <button type="submit" class="btn btn-default">Tallenna</button>
            </div>
        </div>
    </form>


    <!--    Väliraportti-->


    <form name="intReportForm" class="form-horizontal col-md-8" ng-show="global.newState === 'väliraportti'"  role="form" data-ng-submit="create(inReviewForm.$valid)" novalidate>

        <div class="form-group col-md-12">
            <label for="payments" class="col-md-2">Maksatuserittely</label>
            <div class="col-md-10">
                <textarea name="payments" type="text" class="form-control" data-ng-model="" id="payments" placeholder="Parsetaan kauniisti kannasta maksatuserittely ja päivämäärät. Tässä niihin voi lisätä kommentteja?" required></textarea>
            </div>
        </div>


        <div class="form-group col-md-12">
            <label for="themes" class="col-md-2">Tavoitteet</label>
            <div class="col-md-4">
                <textarea name="themes" type="text" class="form-control" data-ng-model="" id="themes" placeholder="Tähän tulee jo kannassa olevat teemat ja tasot. Ei muokattavissa." required></textarea>
            </div>

            <label for="themesComments" class="col-md-2">Toteutuneet tavoitteet</label>
            <div class="col-md-4">
                <textarea name="themesComments" type="text" class="form-control" data-ng-model="" id="themesComments" placeholder="Tälle puolelle kommentteja niistä" required></textarea>
            </div>
        </div>

        <div class="form-group col-md-12">
            <label for="methods" class="col-md-2">Toimintatavat</label>
            <div class="col-md-4">
                <textarea name="methods" type="text" class="form-control" data-ng-model="" id="methods" placeholder="Kannassa olevat toimintatavat" required></textarea>
            </div>

            <label for="methodsComments" class="col-md-2">Toteutuneet toimintatavat</label>
            <div class="col-md-4">
                <textarea name="methodsComments" type="text" class="form-control" data-ng-model="" id="methodsComments" placeholder="Kommentteja toimintatavoista" required></textarea>
            </div>
        </div>

        <div class="form-group col-md-12">
            <label for="comments" class="col-md-2">Muut kommentit</label>
            <div class="col-md-10">
                <textarea name="comments" type="text" class="form-control" data-ng-model="" id="comments" placeholder="Muut raportin kommentit" required></textarea>
            </div>
        </div>


        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <button type="submit" class="btn btn-default">Tallenna</button>
            </div>
        </div>
    </form>



    <!--   Loppuraportti-->


    <form name="endReportForm" class="form-horizontal col-md-8" ng-show="global.newState === 'loppuraportti'"  role="form" data-ng-submit="addEndReportState(endReportForm)" novalidate>

        <div class="form-group col-md-12">
            <label for="audit_date" class="col-md-2">Tilintarkastus pvm</label>
            <div class="col-md-4">
                <input name="audit_date" type="text" class="form-control" data-ng-model="project.end_report.audit.date" id="audit_date" placeholder="Tilintarkastuksen päivämäärä" required>
            </div>


            <label for="audit_review" class="col-md-2">Arvio</label>
            <div class="col-md-4">
                <textarea name="audit_reviw" type="text" class="form-control" data-ng-model="project.end_report.audit.review" id="audit_review" placeholder="Arvio tilintarkastuksesta" required></textarea>
            </div>

        </div>


        <div class="form-group col-md-12">
            <label for="objectives" class="col-md-2">Tavoitteet</label>
            <div class="col-md-4">
                <textarea name="objectives" type="text" class="form-control" data-ng-model="" id="objectives" placeholder="Haetaan projektin tavoitteet" required></textarea>
            </div>

            <label for="objectivesComments" class="col-md-2">Toteutuneet tavoitteet</label>
            <div class="col-md-4">
                <textarea name="objectivesComments" type="text" class="form-control" data-ng-model="project.end_report.objectives" id="objectivesComments" placeholder="Tälle puolelle kommentteja niistä" required></textarea>
            </div>
        </div>

        <div class="form-group col-md-12">
            <label for="activities" class="col-md-2">Toimintatavat</label>
            <div class="col-md-4">
                <textarea name="activities" type="text" class="form-control" data-ng-model="" id="activities" placeholder="Kannassa olevat toimintatavat" required></textarea>
            </div>

            <label for="activitiesComments" class="col-md-2">Toteutuneet toimintatavat</label>
            <div class="col-md-4">
                <textarea name="activitiesComments" type="text" class="form-control" data-ng-model="project.end_report.activities" id="activitiesComments" placeholder="Kommentteja toimintatavoista" required></textarea>
            </div>
        </div>

        <div class="form-group col-md-12">
            <label for="payments" class="col-md-2">Maksatuserittely</label>
            <div class="col-md-10">
                <textarea name="payments" type="text" class="form-control" data-ng-model="" id="payments" placeholder="Tähän parsetaan kannasta maksatuksien tiedot." required></textarea>
            </div>
        </div>

        <div class="form-group col-md-12">
            <label for="comments" class="col-md-2">Muut kommentit</label>
            <div class="col-md-10">
                <textarea name="comments" type="text" class="form-control" data-ng-model="project.end_report.comments" id="comments" placeholder="Muut raportin kommentit" required></textarea>
            </div>
        </div>


        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <button type="submit" class="btn btn-default">Tallenna</button>
            </div>
        </div>
    </form>

    <!--Päättynyt-->

    <form name="endedForm" class="form-horizontal col-md-8" ng-show="global.newState === 'päättynyt'"  role="form" data-ng-submit="create(inReviewForm.$valid)" novalidate>

                <div class="form-group col-md-12">
            <label for="end_date" class="col-md-2">Päivämäärä</label>
            <div class="col-md-10">
                <input name="end_date" type="text" class="form-control" data-ng-model="" id="end_date" placeholder="Päättymispäivämäärä" required>
            </div>
        </div>

                <div class="form-group col-md-12">
            <label for="approved_by" class="col-md-2"> Hyväksyjä</label>
            <div class="col-md-10">
                <select id="approved_by" data-ng-model="" class='form-control'>
                    <option value="option-1">Toiminnanjohtaja</option>
                    <option value="option-2">Hallitus</option>
                </select>
            </div>
        </div>

                <div class="form-group col-md-12">
            <label for="board_notified" class="col-md-2">Tiedoksiannnon päivämäärä</label>
            <div class="col-md-10">
                <input name="board_notified" type="text" class="form-control" data-ng-model="" id="board_notified" placeholder="Hallitukselle tiedoksi pvm" required>
            </div>
        </div>

        <div class="form-group col-md-12">
            <label for="comments" class="col-md-2">Muut kommentit</label>
            <div class="col-md-10">
                <textarea name="comments" type="text" class="form-control" data-ng-model="" id="comments" placeholder="Muut päättämiseen liittyvät kommentit" required></textarea>
            </div>
        </div>


        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <button type="submit" class="btn btn-default">Tallenna</button>
            </div>
        </div>
    </form>

</form>


</section>
