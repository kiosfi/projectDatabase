
<!--
A form for project state change. 
-->
<section data-ng-controller="ProjectsController" data-ng-init="findOne()">

    <h2><span class="name">{{project.project_ref}}: {{project.title}}</span>
    </h2>


    <h3>Koordinaattori: <a href="">{{project.coordinator}}</a>
        <span class="tila"><p>{{project.state}}</p></span></h3>

    <hr>

    <article class="proj-left">
        <h4 class="proj-header">Kuvaus</h4>
        <span class="proj-body">
            {{project.description}}
        </span>
    </article>

    <article class="proj-div">
        <h4 class="proj-header">Hanketiedot</h4>
        <section class="proj-body">
            <p>DAC: {{project.dac}}</p>
            <p>Kirjattu: {{project.reg_date| date:'dd.MM.yyyy'}}</p>
            <p ng-show="project.funding.granted_curr_eur" class="ng-hide">Myönnetty: {{project.funding.granted_curr_eur}} EUR ({{project.funding.granted_curr_local}} local)</p>
            <p ng-show="!project.funding.granted_curr_eur" class="ng-hide">Haettu: {{project.funding.applied_curr_eur}} EUR ({{project.funding.applied_curr_local}} local)</p>
            <p>Kesto: {{project.duration_months}} kk</p>
        </section>
    </article>

    <article class="proj-div">
        <h4 class="proj-header">Järjestö</h4>
        <section class="proj-body">
            <p>Nimi: {{project.organisation.name}}</p>
            <p>Edustaja: {{project.organisation.representative}}</p>
        </section>
    </article>

    <article class="change-box">

        <h3>Olet siirtämässä hanketta tilaan: <span class="change-state-title">{{global.newState}}</span> </h3>

        <p>Täytä seuraavat kentät muokataksesi hankkeen tilaa. Hankkeen muiden tietojen muuttaminen on tehtävä "muokkaus" lomakkeen kautta. </p>

    </article>

    <!--    Käsittelyssä -->

    <form name="inReviewForm" class="form-horizontal col-md-6" ng-show="global.newState === 'käsittelyssä'"  role="form" data-ng-submit="" novalidate>

        <div class="form-group" ng-class="{ 'has-error' : submitted && inReviewForm.inReviewComment.$invalid }">
            <label mean-token="'edit-title'" for="title" class="col-md-2 control-label">Kommentit</label>
            <div class="col-md-10">
                <input name="inRewievComment" type="text" class="form-control" data-ng-model="" id="inRewievComment" placeholder="Siirretty käsittelyyn" required>
                <!--                    <div ng-show="submitted && inReviewForm.inReviewComment.$invalid" class="help-block">
                                        <p ng-show="projectForm.title.$error.required">Jätä kommentti!</p>
                                    </div>-->
            </div>

        </div>

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <button mean-token="'edit-submit'" type="submit" class="btn btn-default">Tallenna</button>
            </div>
        </div>
    </form>

    <!--        Hyväksytty-->

    <form name="approvedForm" class="form-horizontal col-md-6" ng-show="global.newState === 'hyväksytty'"  role="form" data-ng-submit="" novalidate>

        <div class="form-group" ng-class="{ 'has-error' : submitted && inReviewForm.inReviewComment.$invalid }">
            <label mean-token="'edit-title'" for="title" class="col-md-2 control-label">Hyväksynnän päivämäärä</label>
            <div class="col-md-10">
                <input name="inRewievComment" type="text" class="form-control" data-ng-model="" id="inRewievComment" placeholder="Siirretty käsittelyyn" required>
                <!--                    <div ng-show="submitted && inReviewForm.inReviewComment.$invalid" class="help-block">
                                        <p ng-show="projectForm.title.$error.required">Jätä kommentti!</p>
                                    </div>-->
            </div>

        </div>

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <button mean-token="'edit-submit'" type="submit" class="btn btn-default">Tallenna</button>
            </div>
        </div>
    </form>

</section>
