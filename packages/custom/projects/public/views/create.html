<section data-ng-controller="ProjectsController"
         data-ng-init="initNewProject()">
    <link rel="stylesheet" type="text/css" href="/theme/assets/css/twoPart.css">
    <h1 id="header">Hankkeen lisäys</h1>
    <hr>
    <ul id="menu" class="nav nav-list left-part">
        <li>
            <label><a href="#header">Hankkeen lisäys</a></label>
            <ul>
                <li><a href="#fieldset_basics">Nimi,&nbsp;koordinaattori&nbsp;ja&nbsp;järjestö</a></li>
                <li><a href="#fieldset_summary">Perustiedot</a></li>
                <li><a href="#fieldset_details">Lisätiedot</a></li>
                <li><a href="#fieldset_assessment">KIOSin arvio</a></li>
            </ul>
            <label><a href="#fieldset_confirm">Vahvistus</a></label>
        </li>
    </ul>
    <!--<div>{{project}}</div>-->
    <form name="projectForm" class="form-horizontal" role="form"
          data-ng-submit="create(projectForm.$valid)" novalidate>
        <fieldset class="panel panel-primary" id="fieldset_basics">
            <div class="panel-heading">
                <h4>
                    <span ng-click="showInfo = !showInfo">
                        <span class="glyphicon"
                              ng-class="showInfo ? 'glyphicon-collapse-down' : 'glyphicon-collapse-up'">
                        </span>
                        Nimi, koordinaattori ja järjestö
                    </span>
                </h4>
            </div>
            <div ng-show="!showInfo" class="panel-body">

                <div class="form-group">
                    <label for="title" class="col-md-3 control-label">{{fieldNames["title"]}}</label>
                    <div class="col-md-9" ng-class="{'has-error': projectForm.title.$invalid}">
                        <input  name="title"
                                type="text"
                                class="form-control"
                                data-ng-model="project.title"
                                id="title"
                                required placeholder="Hankkeen nimi">
                        <div    ng-show="projectForm.title.$invalid"
                                class="help-block">
                            <p ng-show="projectForm.title.$error.required">Kenttä on pakollinen</p>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="coordinator" class="col-md-3 control-label">{{fieldNames["coordinator"]}}</label>
                    <div class="col-md-9" ng-class="{'has-error': projectForm.coordinator.$invalid}">
                        <input  name="coordinator"
                                type="text"
                                class="form-control"
                                data-ng-model="project.coordinator"
                                id="coordinator"
                                required
                                placeholder="{{fieldNames['coordinator']}}n nimi">
                        <div    ng-show="projectForm.coordinator.$invalid"
                                class="help-block">
                            <p ng-show="projectForm.coordinator.$error.required">Kenttä on pakollinen</p>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-md-3">
                        <label  for="registration-date" class="acol-md-3 control-label">{{fieldNames["reg_date"]}}</label>
                    </div>
                    <div class="col-md-4" ng-class="{'has-error': projectForm.register_date.$invalid}">
                        <div    class="input-group">
                            <input  name="register_date"
                                    type="text"
                                    class="form-control"
                                    uib-datepicker-popup="d. MMMM yyyy"
                                    data-ng-model="register_date"
                                    id="register_date"
                                    placeholder="{{fieldNames['register_date']}}"
                                    is-open="registerdate.opened"
                                    datepicker-options="registerDateOptions"
                                    ng-required="true"
                                    close-text="Sulje"
                                    clear-text="Tyhjennä"
                                    current-text="Tänään"
                                    alt-input-formats="altInputFormats" />
                            <span class="input-group-btn">
                                <button type="button"
                                        class="btn btn-default"
                                        ng-click="openRegisterDate();">
                                    <i class="glyphicon glyphicon-calendar"></i>
                                </button>
                            </span>
                        </div>
                    </div>
                    <div    ng-show="projectForm.register_date.$invalid"
                            class="col-md-5 has-error">
                        <p class="help-block ">Valitse päivä</p>
                    </div>
                </div>

                <div class="form-group">
                    <label for="security_level" class="col-md-3 control-label">{{fieldNames["security_level"]}}</label>
                    <div class="col-md-4">
                        <select name="security_level"
                                class="form-control"
                                data-ng-model="project.security_level"
                                id="security_level"
                                ng-options="sec_level for sec_level in securityLevels"/>
                    </div>
                </div>
                
                <hr>

                <div class="form-group" ng-disabled="!newOrg">
                    <label class="col-md-3 control-label">{{fieldNames["organisation"]}}</label>
                    <div class="col-md-4">
                        <ul class="nav nav-pills">
                            <li ng-class="{active: newOrg}">
                                <a id="addOrg" href=""
                                    data-ng-click="addNewOrg()">
                                    <span class="glyphicon glyphicon-plus">
                                    </span>&nbsp;Uusi
                                </a>
                            </li>
                            <li ng-class="{active: !newOrg}">
                                <a  id="addOrgFromList" href="" 
                                    data-ng-click="addOrgFromDb()">
                                    <span class="glyphicon glyphicon-list"></span>&nbsp;Listalta
                                </a>
                            </li>
                        </ul>
                    </div>
                    
                    <div    class="col-md-3"
                            data-ng-if="!newOrg"
                            id="orgSelection"
                            data-ng-init="addOrgFromDb()"
                            ng-class="{'has-error': !newOrg && !project.listOrganisation}">
                            <select class="form-control"
                                    data-ng-if="!newOrg"
                                    data-ng-model="project.listOrganisation">
                                <option data-ng-if="!newOrg"
                                        data-ng-repeat="org in orgs"
                                        value="{{org._id}}">{{org.name}}</option>
                            </select>
                            <div ng-show="!project.listOrganisation" class="help-block">
                            <p>Valitse järjestö</p>
                        </div>
                    </div>                    
                </div>

                <article class="well-lg" data-ng-show="newOrg">
                    <fieldset class="panel panel-primary">
                        <div class="panel-heading">
                            <h5>
                                <span ng-click="showOrgInfo = !showOrgInfo">
                                    <span class="glyphicon"
                                          ng-class="showOrgInfo ? 'glyphicon-collapse-down' : 'glyphicon-collapse-up'">
                                    </span>
                                    Järjestön perustiedot
                                </span>
                            </h5>
                        </div>

                        <div ng-show="showOrgInfo" class="panel-body">

                            <div class="form-group">
                                <label  for="orgrepName"
                                        class="col-md-2 control-label">{{fieldNames["organisation_name"]}}</label>
                                <div class="col-md-10" ng-class="{'has-error': projectForm.orgname.$invalid}">
                                    <input  class="form-control"
                                            data-ng-if="newOrg"
                                            name="orgname"
                                            type="text"
                                            data-ng-model="project.organisation.name"
                                            id="orgname"
                                            placeholder="Järjestön nimi"
                                            required>
                                    <div    ng-show="projectForm.orgname.$invalid"
                                            class="help-block">
                                        <p ng-show="projectForm.orgname.$error.required">Kenttä on pakollinen</p>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label  for="orgrepName"
                                        class="col-md-2 control-label">{{fieldNames["organisation_representative"]}}</label>
                                <div class="col-md-10" ng-class="{'has-error': projectForm.orgrepName.$invalid}">
                                    <input  class="form-control"
                                            data-ng-if="newOrg"
                                            name="orgrepName"
                                            type="text"
                                            data-ng-model="project.organisation.representative.name"
                                            id="orgrepName"
                                            placeholder="Edustajan nimi"
                                            required>
                                    <div    ng-show="projectForm.orgrepName.$invalid"
                                            class="help-block">
                                        <p ng-show="projectForm.orgrepName.$error.required">Kenttä on pakollinen</p>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-md-2 control-label">{{fieldNames["organisation_email"]}}</label>
                                <div class="col-md-4" ng-class="{'has-error': projectForm.orgrepEmail.$invalid}">
                                    <input  class="form-control"
                                            data-ng-if="newOrg"
                                            name="orgrepEmail"
                                            type="text"
                                            data-ng-model="project.organisation.representative.email"
                                            id="orgrep"
                                            placeholder="Edustajan sähköpostiosoite" required>

                                    <div    ng-show="projectForm.orgrepEmail.$invalid"
                                            class="help-block">
                                        <p ng-show="projectForm.orgrepEmail.$error.required">Kenttä on pakollinen</p>
                                    </div>
                                </div>
                                <label class="col-md-2 control-label">{{fieldNames["organisation_tel"]}}</label>
                                <div class="col-md-4" ng-class="{'has-error': projectForm.orgrepPhone.$invalid}">
                                    <input  class="form-control"
                                            data-ng-if="newOrg"
                                            name="orgrepPhone"
                                            type="text"
                                            data-ng-model="project.organisation.representative.phone"
                                            id="orgrepPhone"
                                            placeholder="Edustajan puhelinnumero" required>
                                    <div    ng-show="projectForm.orgrepPhone.$invalid"
                                            class="help-block">
                                        <p ng-show="projectForm.orgrepPhone.$error.required">Kenttä on pakollinen</p>
                                    </div>
                                </div>
                            </div>

                            <hr>

                            <div class="form-group">
                                <label class="col-md-2 control-label">{{fieldNames["organisation_address"]}}</label>
                                <div class="col-md-4" ng-class="{'has-error': projectForm.orgaddr.$invalid}">
                                    <input  class="form-control"
                                            data-ng-if="newOrg"
                                            name="orgaddr"
                                            type="text"
                                            data-ng-model="project.organisation.address.street"
                                            id="orgaddr"
                                            placeholder="Järjestön osoite" required>

                                    <div    ng-show="projectForm.orgaddr.$invalid"
                                            class="help-block">
                                        <p ng-show="projectForm.orgaddr.$error.required">Kenttä on pakollinen</p>
                                    </div>
                                </div>
                                <label class="col-md-2 control-label">Postinumero</label>
                                <div class="col-md-4" ng-class="{'has-error': projectForm.orgaddrcode.$invalid}">
                                    <input  class="form-control"
                                            data-ng-if="newOrg"
                                            name="orgaddrcode"
                                            type="text"
                                            data-ng-model="project.organisation.address.postal_code"
                                            id="orgaddrcode"
                                            placeholder="Järjestön postinumero" required>
                                    <div    ng-show="projectForm.orgaddrcode.$invalid"
                                            class="help-block">
                                        <p ng-show="projectForm.orgaddrcode.$error.required">Kenttä on pakollinen</p>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-md-2 control-label">Kaupunki</label>
                                <div class="col-md-4" ng-class="{'has-error': projectForm.orgaddrcity.$invalid}">
                                    <input  class="form-control"
                                            data-ng-if="newOrg"
                                            name="orgaddrcity"
                                            type="text"
                                            data-ng-model="project.organisation.address.city"
                                            id="orgaddrcity"
                                            placeholder="Järjestön kaupunki" required>
                                    <div    ng-show="projectForm.orgaddrcity.$invalid"
                                            class="help-block">
                                        <p ng-show="projectForm.orgaddrcity.$error.required">Kenttä on pakollinen</p>
                                    </div>
                                </div>
                                <label class="col-md-2 control-label">Maa</label>
                                <div class="col-md-4" ng-class="{'has-error': projectForm.orgaddrcntry.$invalid}">
                                    <input  class="form-control"
                                            data-ng-if="newOrg"
                                            name="orgaddrcntry"
                                            type="text"
                                            data-ng-model="project.organisation.address.country"
                                            id="orgaddrcntry"
                                            placeholder="Järjestön maa" required>
                                    <div    ng-show="projectForm.orgaddrcntry.$invalid"
                                            class="help-block">
                                        <p ng-show="projectForm.orgaddrcntry.$error.required">Kenttä on pakollinen</p>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-md-2 control-label">Puhelinnumero</label>
                                <div class="col-md-4" ng-class="{'has-error': projectForm.orgtel.$invalid}">
                                    <input  class="form-control"
                                            data-ng-if="newOrg"
                                            name="orgtel"
                                            type="text"
                                            data-ng-model="project.organisation.tel"
                                            id="orgtel"
                                            placeholder="Järjestön puhelinnumero" required>
                                    <div    ng-show="projectForm.orgtel.$invalid"
                                            class="help-block">
                                        <p ng-show="projectForm.orgtel.$error.required">Kenttä on pakollinen</p>
                                    </div>
                                </div>
                                <label class="col-md-2 control-label">{{fieldNames["organisation_email"]}}</label>
                                <div class="col-md-4" ng-class="{'has-error': projectForm.orgemail.$invalid}">
                                    <input  class="form-control"
                                            data-ng-if="newOrg"
                                            name="orgemail"
                                            type="email"
                                            data-ng-model="project.organisation.email"
                                            id="orgemail"
                                            placeholder="Järjestön sähköpostiosoite" required>
                                    <div    ng-show="projectForm.orgemail.$invalid"
                                            class="help-block">
                                        <p ng-show="projectForm.orgemail.$error.email">Syötä oikea sähköpostiosoite</p>
                                    </div>
                                    <div    ng-show="projectForm.orgemail.$invalid"
                                            class="help-block">
                                        <p ng-show="projectForm.orgemail.$error.required">Kenttä on pakollinen</p>
                                    </div>                                    
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-md-2 control-label">{{fieldNames["organisation_www"]}}</label>
                                <div class="col-md-10">
                                    <input  class="form-control"
                                            data-ng-if="newOrg"
                                            name="orgwww"
                                            type="text"
                                            data-ng-model="project.organisation.website"
                                            id="orgwww"
                                            placeholder="Järjestön kotisivut">
                                </div>
                            </div>                            
                        </div>
                    </fieldset>

                    <fieldset class="panel panel-primary">
                        <div class="panel-heading">
                            <h5>
                                <span ng-click="showOrgDetails = !showOrgDetails">
                                    <span class="glyphicon"
                                          ng-class="showOrgDetails ? 'glyphicon-collapse-down' : 'glyphicon-collapse-up'">
                                    </span>
                                    Järjestön lisätiedot
                                </span>
                            </h5>
                        </div>

                        <div ng-show="showOrgDetails" class="panel-body">
                            
                            <div class="form-group">
                                <label for="orgExecMan" class="col-md-3 control-label">Vastaava johtaja</label>
                                <div class="col-md-9">
                                    <input  class="form-control"
                                                data-ng-if="newOrg"
                                                name="orgExecMan"
                                                type="text"
                                                data-ng-model="project.organisation.exec_manager"
                                                id="orgExecMan"
                                                placeholder="Vastaavan johtajan nimi">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="orgCommRep" class="col-md-3 control-label">Viestintävastaava</label>
                                <div class="col-md-9">
                                    <input  class="form-control"
                                                data-ng-if="newOrg"
                                                name="orgCommRep"
                                                type="text"
                                                data-ng-model="project.organisation.communications_rep"
                                                id="orgCommRep"
                                                placeholder="Viestintävastaavan nimi">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="orgExecMan" class="col-md-3 control-label">Hallintomalli ja henkilöstö</label>
                                <div class="col-md-9">
                                    <textarea   class="form-control"
                                                data-ng-if="newOrg"
                                                name="orgLegal"
                                                data-ng-model="project.organisation.legal_status"
                                                id="orgLegal"
                                                placeholder="Hallintomalli ja henkilöstö">
                                    </textarea>                                                
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="orgDescription" class="col-md-3 control-label">Tavoitteet ja keskeiset toimintatavat</label>
                                <div class="col-md-9">
                                    <textarea   class="form-control"
                                                data-ng-if="newOrg"
                                                name="orgDescription"
                                                data-ng-model="project.organisation.description"
                                                id="orgDescription"
                                                placeholder="Tavoitteet ja keskeiset toimintatavat">
                                    </textarea>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="orgLinks" class="col-md-3 control-label">Yhteistyökumppanit ja verkostoituminen</label>
                                <div class="col-md-9">
                                    <textarea   class="form-control"
                                                data-ng-if="newOrg"
                                                name="orgLinks"
                                                data-ng-model="project.organisation.int_links"
                                                id="orgLinks"
                                                placeholder="Yhteistyökumppanit ja verkostoituminen">
                                    </textarea>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="orgOthFund" class="col-md-3 control-label">Vuosibudjetit ja rahoittajat</label>
                                <div class="col-md-9">
                                    <textarea   class="form-control"
                                                data-ng-if="newOrg"
                                                name="orgOthFund"
                                                data-ng-model="project.organisation.other_funding_budget"
                                                id="orgOthFund"
                                                placeholder="Vuosibudjetit ja rahoittajat">
                                    </textarea>                                                
                                </div>
                            </div>

<!--                                <div class="form-group col-md-6">
                                    <label for="orgNatLocLinks"
                                           class="col-md-3 control-label">
                                        Kansalliset ja paikalliset yhteydet
                                    </label>
                                    <div class="col-md-9">
                                        <textarea data-ng-if="newOrg"
                                                  name="orgNatLocLinks"
                                                  data-ng-model="project.organisation.nat_local_links"
                                                  id="orgNatLocLinks"
                                                  class="form-control">
                                        </textarea>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12">-->

                            <div class="form-group">
                                <label for="orgAcct" class="col-md-3 control-label">Taloushallinto ja Tilintarkastus</label>
                                <div class="col-md-9">
                                    <textarea   class="form-control"
                                                data-ng-if="newOrg"
                                                name="orgAcct"
                                                data-ng-model="project.organisation.accounting_audit"
                                                id="orgAcct"
                                                placeholder="Taloushallinto ja Tilintarkastus">
                                    </textarea>
                                </div>
                            </div>

<!--                            </div>
                            <div class="col-md-12">-->

                            <div class="form-group">
                                <label for="org_background" class="col-md-3 control-label">Oleelliset taustatiedot</label>
                                <div class="col-md-9">
                                    <textarea   class="form-control"
                                                data-ng-if="newOrg"
                                                name="org_background"
                                                data-ng-model="project.organisation.background"
                                                id="org_background"
                                                placeholder="Oleelliset taustatiedot">
                                    </textarea>                                                
                                </div>
                            </div>
                            
                        </div>
                    </fieldset>

                    <fieldset class="panel panel-primary">
                        <div class="panel-heading">
                            <h5>
                                <span ng-click="showBankInfo = !showBankInfo">
                                    <span class="glyphicon"
                                          ng-class="showBankInfo ? 'glyphicon-collapse-down' : 'glyphicon-collapse-up'">
                                    </span>
                                    Pankkitili
                                </span>
                            </h5>
                        </div>
                        <div ng-show="showBankInfo" class="panel-body">

                            <div class="form-group">
                                <label for="bankIban" class="col-md-2 control-label">Tilinumero (IBAN)</label>
                                <div class="col-md-4">
                                    <input  class="form-control"
                                            data-ng-if="newOrg"
                                            name="bankIban"
                                            type="text"
                                            data-ng-model="project.organisation.bank_account"
                                            id="bankIban"
                                            placeholder="Tilinumero (IBAN)">
                                </div>                        
                                <label for="bankIban" class="col-md-2 control-label">Pankin SWIFT</label>
                                <div class="col-md-4">
                                    <input  class="form-control"
                                            data-ng-if="newOrg"
                                            name="bankSwift"
                                            type="text"
                                            data-ng-model="project.organisation.bank_account.swift"
                                            id="bankSwift"
                                            placeholder="Pankin SWIFT">
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="bankHolder" class="col-md-2 control-label">Tilin haltija</label>
                                <div class="col-md-10">
                                    <input  class="form-control"
                                            data-ng-if="newOrg"
                                            name="bankHolder"
                                            type="text"
                                            data-ng-model="project.organisation.bank_account.holder_name"
                                            id="bankHolder"
                                            placeholder="Tilin haltijan nimi">
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="org_background" class="col-md-2 control-label">Pankin yhteystiedot</label>
                                <div class="col-md-10">
                                    <textarea   class="form-control"
                                                data-ng-if="newOrg"
                                                name="bankCont"
                                                data-ng-model="project.organisation.bank_account.bank_contact_details"
                                                id="bankCont"
                                                placeholder="Pankin yhteystiedot">
                                    </textarea>                                                
                                </div>
                            </div>
                        
                        </div>
                    </fieldset>

                    <fieldset class="panel panel-primary">
                        <div class="panel-heading">
                            <h5>
                                <span ng-click="showSpecialNotes = !showSpecialNotes">
                                    <span class="glyphicon"
                                          ng-class="showSpecialNotes ? 'glyphicon-collapse-down' : 'glyphicon-collapse-up'">
                                    </span>
                                    Erityishuomioita
                                </span>
                            </h5>
                        </div>
                        <div ng-show="showSpecialNotes" class="panel-body">
                            <div class="form-group">
                                <label for="org_special_notes" class="col-md-2 control-label">Erityishuomioita</label>
                                <div class="col-md-10">
                                    <textarea   class="form-control"
                                                data-ng-if="newOrg"
                                                name="org_special_notes"
                                                data-ng-model="project.organisation.special_notes"
                                                id="org_special_notes"
                                                placeholder="Erityishuomioita">
                                    </textarea>                                                
                                </div>
                            </div>
                        </div>
                    </fieldset>

                </article>

            </div>
        </fieldset>

        <fieldset class="panel panel-primary" id="fieldset_summary">
            <div class="panel-heading">
                <h4>
                    <span ng-click="showProjInfo = !showProjInfo">
                        <span class="glyphicon"
                              ng-class="showProjInfo ? 'glyphicon-collapse-down' : 'glyphicon-collapse-up'">
                        </span>
                        Perustiedot
                    </span>
                </h4>
            </div>
            <div ng-show="showProjInfo" class="panel-body">

                <div class="form-group">
                    <label for="description" class="col-md-2 control-label">{{fieldNames["description"]}}</label>
                    <div class="col-md-10">
                        <textarea   class="form-control"
                                    name="description"
                                    data-ng-model="project.description"
                                    id="description"
                                    placeholder="{{fieldNames['description']}}">
                        </textarea>
                    </div>
                </div>
                <div class="form-group">
                    <label for="description_en" class="col-md-2 control-label">{{fieldNames["description_en"]}}</label>
                    <div class="col-md-10">
                        <textarea   class="form-control"
                                    name="description_en"
                                    data-ng-model="project.description_en"
                                    id="description_en"
                                    placeholder="{{fieldNames['description']}} englanniksi">
                        </textarea>
                    </div>
                </div>

                <div class="form-group">
                    <label for="appliedlocal" class="col-md-2 control-label">{{fieldNames["funding_applied_curr_local"]}}</label>
                    <div class="col-md-3">
                        <input  class="form-control"
                                name="appliedlocal"
                                type="number"
                                data-ng-model="project.funding.applied_curr_local"
                                id="appliedlocal"
                                placeholder="00.00"
                                min="0">
                    </div>
                    <div class="col-md-2">
                        <select class="form-control"
                                name="curr_local_unit"
                                data-ng-model="project.funding.curr_local_unit"
                                id="curr_local_unit">
                            <option data-ng-repeat="unit in currencyUnits">{{unit}}</option>
                        </select>                                            
                    </div>
                    <label for="appliedeur" class="col-md-2 control-label">Haettu avustus (EUR)</label>
                    <div class="col-md-3">
                        <input  class="form-control"
                                name="appliedeur"
                                type="number"
                                data-ng-model="project.funding.applied_curr_eur"
                                id="appliedeur"
                                placeholder="00.00"
                                min="0">
                    </div>                    
                </div>
                <div class="form-group">
                    <label for="duration" class="col-md-2 control-label">{{fieldNames["duration_months"]}}</label>
                    <div class="col-md-3">
                        <input  class="form-control"
                                name="duration"
                                type="number"
                                data-ng-model="project.duration_months"
                                id="duration"
                                placeholder="{{fieldNames['duration_months']}}"
                                min="0">
                    </div>
                </div>
                <div class="form-group">

                </div>
       
            </div>
        </fieldset>
        <fieldset class="panel panel-primary" id="fieldset_details">
            <div class="panel-heading">
                <h4>
                    <span ng-click="showProjDetails = !showProjDetails">
                        <span class="glyphicon"
                              ng-class="showProjDetails ? 'glyphicon-collapse-down' : 'glyphicon-collapse-up'">
                        </span>
                        Lisätiedot
                    </span>
                </h4>
            </div>
            <div ng-show="showProjDetails" class="panel-body">
                <div class="form-group col-md-12">
                    <label class="control-label">
                        {{fieldNames["methods"]}}
                    </label>
                    <div class="form-group col-md-12">
                        <div class="panel panel-default"
                             style="background-color: #F9F9F9"
                             id="methodsSelection"
                             data-ng-repeat="method in addedMethods">
                            <div class="panel-body">
                                <div class="col-md-7"
                                     ng-class="projectForm['methodSelect' + $index].$invalid ? 'has-error' : ''">
                                    <label class="control-label col-md-2">
                                        Toiminto
                                    </label>
                                    <div class="col-md-10">
                                        <select id="{{'methodSelect' + $index}}"
                                                name="{{'methodSelect' + $index}}"
                                                data-ng-model="method.name"
                                                required>
                                            <option data-ng-repeat="methodName in methodNames"
                                                    value="{{methodName}}">
                                                {{methodName}}
                                            </option>
                                        </select>
                                        <div ng-show="projectForm['methodSelect' + $index].$invalid"
                                             class="help-block">
                                            <p ng-show="projectForm['methodSelect' + $index].$error.required">
                                                Toiminto on pakollinen
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3"
                                     ng-class="projectForm['levelSelect' + $index].$invalid ? 'has-error' : ''">
                                    <label class="control-label col-md-3">
                                        Taso
                                    </label>
                                    <div class="col-md-9">
                                        <select id="{{'levelSelect' + $index}}"
                                                name="{{'levelSelect' + $index}}"
                                                data-ng-model="method.level"
                                                required>
                                            <option data-ng-repeat="methodLevel in methodLevels"
                                                    value="{{methodLevel}}">
                                                {{methodLevel}}
                                            </option>
                                        </select>
                                        <div ng-show="projectForm['levelSelect' + $index].$invalid"
                                             class="help-block">
                                            <p ng-show="projectForm['levelSelect' + $index].$error.required">
                                                Taso on pakollinen
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12"
                                     ng-class="projectForm['methodComment' + $index].$invalid ? 'has-error' : ''"
                                     style="margin-top: 0.5em">
                                    <label class="col-md-1 control-label">
                                        Kuvaus
                                    </label>
                                    <div class="col-md-11">
                                        <textarea id="{{'methodComment' + $index}}"
                                                  name="{{'methodComment' + $index}}"
                                                  data-ng-model="method.comment"
                                                  class="form-control"
                                                  required>
                                        </textarea>
                                        <div ng-show="projectForm['methodComment' + $index].$invalid"
                                             class="help-block">
                                            <p ng-show="projectForm['methodComment' + $index].$error.required">
                                                Kuvaus on pakollinen
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12" style="text-align: center">
                            <button class="btn btn-sm btn-default"
                                    ng-click="removeMethod();">
                                <span class="glyphicon glyphicon-minus">
                                </span>&nbsp;Poista viimeinen
                            </button>
                            <button class="btn btn-sm btn-default"
                                    ng-click="addMethod();">
                                <span class="glyphicon glyphicon-plus">
                                </span>&nbsp;Lisää
                            </button>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <hr>
                        <div class="form-group col-md-4">
                            <label class="col-md-3 control-label" for="country">
                                {{fieldNames["country"]}}
                            </label>
                            <div class="col-md-9">
                                <input name="country" type="text"
                                       class="form-control"
                                       data-ng-model="project.country" id="country">
                            </div>
                        </div>
                        <div class="form-group col-md-4">
                            <label class="col-md-3 control-label" for="region">
                                {{fieldNames["region"]}}
                            </label>
                            <div class="col-md-9">
                                <input name="region" type="text"
                                       class="form-control"
                                       data-ng-model="project.region" id="region">
                            </div>
                        </div>
                        <div class="form-group col-md-4">
                            <label class="col-md-3 control-label" for="dac">
                                {{fieldNames["dac"]}}
                            </label>
                            <div class="col-md-9">
                                <input name="dac" type="text" class="form-control"
                                       data-ng-model="project.dac" id="dac">
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="form-group col-md-6">
                            <label for="project_goal"
                                   class="col-md-3 control-label">
                                {{fieldNames["project_goal"]}}
                            </label>
                            <div class="col-md-9">
                                <textarea name="project_goal"
                                          data-ng-model="project.project_goal"
                                          id="project_goal" class="form-control">
                                </textarea>
                            </div>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="context"
                                   class="col-md-3 control-label">
                                Konteksti
                                <!--{{fieldNames["context"]}}-->
                            </label>
                            <div class="col-md-9">
                                <textarea name="context"
                                          data-ng-model="project.context"
                                          id="context" class="form-control">
                                </textarea>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="form-group col-md-6">
                            <label for="target_group" class="col-md-3 control-label">
                                {{fieldNames["target_group"]}}
                            </label>
                            <div class="col-md-9">
                                <textarea name="target_group"
                                          data-ng-model="project.target_group"
                                          id="target_group" class="form-control">
                                </textarea>
                            </div>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="gender_aspect"
                                   class="col-md-3 control-label">
                                {{fieldNames["gender_aspect"]}}
                            </label>
                            <div class="col-md-9">
                                <textarea name="gender_aspect"
                                          data-ng-model="project.gender_aspect"
                                          id="gender_aspect" class="form-control">
                                </textarea>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="form-group col-md-6">
                            <label for="vulnerable_groups"
                                   class="col-md-3 control-label">
                                Haavoitt. ryhmien huomiointi
                                <!--{{fieldNames["vulnerable_groups"]}}-->
                            </label>
                            <div class="col-md-9">
                                <textarea name="vulnerable_groups"
                                          data-ng-model="project.vulnerable_groups"
                                          id="vulnerable_groups"
                                          class="form-control">
                                </textarea>
                            </div>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="planned_results"
                                   class="col-md-3 control-label">
                                {{fieldNames["planned_results"]}}
                            </label>

                            <div class="col-md-9">
                                <textarea name="planned_results"
                                          data-ng-model="project.planned_results"
                                          id="planned_results" class="form-control">
                                </textarea>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="form-group col-md-6">
                            <label for="indicators"
                                   class="col-md-3 control-label">
                                {{fieldNames["indicators"]}}
                            </label>
                            <div class="col-md-9">
                                <textarea name="indicators"
                                          data-ng-model="project.indicators"
                                          id="indicators" class="form-control">
                                </textarea>
                            </div>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="risk_control"
                                   class="col-md-3 control-label">
                                {{fieldNames["risk_control"]}}
                            </label>
                            <div class="col-md-9">
                                <textarea name="risk_control"
                                          data-ng-model="project.risk_control"
                                          id="risk_control" class="form-control">
                                </textarea>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="form-group col-md-6">
                            <label for="reporting_evaluation"
                                   class="col-md-3 control-label">
                                {{fieldNames["reporting_evaluation"]}}
                            </label>
                            <div class="col-md-9">
                                <textarea name="reporting_evaluation"
                                          data-ng-model="project.reporting_evaluation"
                                          id="reporting_evaluation"
                                          class="form-control">
                                </textarea>
                            </div>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="human_resources"
                                   class="col-md-3 control-label">
                                {{fieldNames["human_resources"]}}
                            </label>

                            <div class="col-md-9">
                                <textarea name="human_resources"
                                          data-ng-model="project.human_resources"
                                          id="human_resources" class="form-control">
                                </textarea>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="form-group col-md-6">
                            <label for="budget" class="col-md-3 control-label">
                                {{fieldNames["budget"]}}
                            </label>
                            <div class="col-md-9">
                                <textarea name="budget"
                                          data-ng-model="project.budget" id="budget"
                                          class="form-control"></textarea>
                            </div>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="other_donors_proposed"
                                   class="col-md-3 control-label">
                                {{fieldNames["other_donors_proposed"]}}
                            </label>
                            <div class="col-md-9">
                                <textarea name="other_donors_proposed"
                                          data-ng-model="project.other_donors_proposed"
                                          id="other_donors_proposed"
                                          class="form-control">
                                </textarea>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="form-group col-md-6">
                            <label for="referees" class="col-md-3 control-label">
                                {{fieldNames["referees"]}}
                            </label>
                            <div class="col-md-9">
                                <textarea name="referees"
                                          data-ng-model="project.referees"
                                          id="referees" class="form-control">
                                </textarea>
                            </div>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="background_check"
                                   class="col-md-3 control-label">
                                {{fieldNames["background_check"]}}
                            </label>
                            <div class="col-md-9">
                                <textarea name="background_check"
                                          data-ng-model="project.background_check"
                                          id="background_check"
                                          class="form-control">
                                </textarea>
                            </div>
                        </div>
                    </div>
                </div>
        </fieldset>
        <fieldset class="panel panel-primary" id="fieldset_assessment">
            <div class="panel-heading">
                <h4>
                    <span ng-click="showAssessment = !showAssessment">
                        <span class="glyphicon"
                              ng-class="showAssessment ? 'glyphicon-collapse-down' : 'glyphicon-collapse-up'">
                        </span>
                        KIOSin arvio
                    </span>
                </h4>
            </div>
            <div ng-show="showAssessment" class="panel-body">

                <div class="form-group">
                    <label for="fitness" class="col-md-2 control-label">{{fieldNames["fitness"]}}</label>
                    <div class="col-md-10">
                        <textarea   class="form-control"
                                    name="fitness"
                                    data-ng-model="project.fitness"
                                    id="fitness"
                                    placeholder="{{fieldNames['fitness']}}">
                        </textarea>
                    </div>
                </div>
                <div class="form-group">
                    <label for="capacity" class="col-md-2 control-label">{{fieldNames["capacity"]}}</label>
                    <div class="col-md-10">
                        <textarea   class="form-control"
                                    name="capacity"
                                    data-ng-model="project.capacity"
                                    id="capacity"
                                    placeholder="{{fieldNames['capacity']}}">
                        </textarea>
                    </div>
                </div>
                <div class="form-group">
                    <label for="feasibility" class="col-md-2 control-label">{{fieldNames["feasibility"]}}</label>
                    <div class="col-md-10">
                        <textarea   class="form-control"
                                    name="feasibility"
                                    data-ng-model="project.feasibility"
                                    id="feasibility"
                                    placeholder="{{fieldNames['feasibility']}}">
                        </textarea>
                    </div>
                </div>    
                <div class="form-group">
                    <label for="effectiveness" class="col-md-2 control-label">{{fieldNames["effectiveness"]}}</label>
                    <div class="col-md-10">
                        <textarea   class="form-control"
                                    name="effectiveness"
                                    data-ng-model="project.effectiveness"
                                    id="effectiveness"
                                    placeholder="{{fieldNames['effectiveness']}}">
                        </textarea>
                    </div>
                </div>
                <div class="form-group">
                    <label for="proposed_funding" class="col-md-2 control-label">{{fieldNames["proposed_funding"]}}</label>
                    <div class="col-md-10">
                        <textarea   class="form-control"
                                    name="proposed_funding"
                                    data-ng-model="project.proposed_funding"
                                    id="proposed_funding"
                                    placeholder="{{fieldNames['proposed_funding']}}">
                        </textarea>
                    </div>
                </div>
            </div>
        </fieldset>
        <fieldset class="panel panel-primary" id="fieldset_confirm">
            <div class="panel-heading">
                <h4>
                    <span ng-click="showConfirmation = !showConfirmation">
                        <span class="glyphicon"
                              ng-class="showConfirmation ? 'glyphicon-collapse-down' : 'glyphicon-collapse-up'">
                        </span>
                        Vahvistus
                    </span>
                </h4>
            </div>
            <div ng-show="!showConfirmation" class="panel-body">

                 <div class="form-group">
                    <label for="special_notes" class="col-md-3 control-label">{{fieldNames["special_notes"]}}</label>
                    <div class="col-md-9">
                        <textarea   class="form-control"
                                    name="special_notes"
                                    data-ng-model="project.special_notes"
                                    id="special_notes"
                                    placeholder="{{fieldNames['special_notes']}}">
                        </textarea>
                    </div>
                </div>       

                <div class="form-group col-md-12" style="text-align: center">
                    <hr>
                    <button type="submit" class="btn btn-primary"
                            ng-disabled="projectForm.$invalid ||
                                        (!newOrg && !project.listOrganisation)">
                        <span class="glyphicon glyphicon-ok">
                        </span>&nbsp;Tallenna
                    </button>
                </div>
            </div>
        </fieldset>
    </form>
</section>
