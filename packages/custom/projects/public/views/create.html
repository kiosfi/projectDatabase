<section data-ng-controller="ProjectsController">
    <h1>Hankkeen lisäys</h1>
    <hr>
    <form name="projectForm" class="form-horizontal" role="form"
          data-ng-submit="create(projectForm.$valid)" novalidate>
        <fieldset class="panel panel-primary">
            <div class="panel-heading">
                <h4>
                    <span ng-click="showInfo = !showInfo">
                        <span class="glyphicon"
                              ng-class="showInfo ? 'glyphicon-collapse-down' : 'glyphicon-collapse-up'">
                        </span>
                        Nimi, koordinaattori ja järjestö
                    </span>
                </h4>
            </div>
            <div ng-show="showInfo" class="panel-body">
                <div class="form-group col-md-6"
                     ng-class="{'has-error': projectForm.title.$invalid }">
                    <label class="col-md-3 control-label">
                        {{fieldNames["title"]}}
                    </label>
                    <div class="col-md-9">
                        <input name="title" type="text" class="form-control"
                               data-ng-model="project.title" id="title"
                               required>
                        <div ng-show="projectForm.title.$invalid"
                             class="help-block">
                            <p ng-show="projectForm.title.$error.required">
                                Kenttä on pakollinen
                            </p>
                        </div>
                    </div>
                </div>
                <div class="form-group col-md-6"
                     ng-class="{'has-error': projectForm.coordinator.$invalid }">
                    <label  class="col-md-3 control-label">
                        {{fieldNames["coordinator"]}}
                    </label>
                    <div class="col-md-9">
                        <input name="coordinator" type="text"
                               class="form-control"
                               data-ng-model="project.coordinator"
                               id="coordinator" required>
                        <div ng-show="projectForm.coordinator.$invalid"
                             class="help-block">
                            <p ng-show="projectForm.coordinator.$error.required">
                                Koordinaattori on pakollinen
                            </p>
                        </div>
                    </div>
                </div>
                <div class="form-group col-md-12">
                    <div class="form-group col-md-6">
                        <label class="col-md-3 control-label">
                            Rekisteröimispvm
                            <!--{{fieldNames["reg_date"]}}-->
                        </label>
                        <div class="col-md-9">
                            <div class="col-md-4"
                                 ng-class="{'has-error': registerForm.registerMonth.$invalid }">
                                <input name="registerDay" type="number"
                                       class="form-control"
                                       data-ng-model="register_day"
                                       id="registerDay" required>
                                <div ng-show="projectForm.registerDay.$invalid"
                                     class="help-block" >
                                    <p ng-show="projectForm.registerDay.$error.required">
                                        Päivä on pakollinen
                                    </p>
                                </div>
                            </div>
                            <div class="col-md-4"
                                 ng-class="{'has-error': registerForm.registerMonth.$invalid }">
                                <input name="registerMonth" type="number"
                                       class="form-control"
                                       data-ng-model="register_month"
                                       id="registerMonth" required>
                                <div ng-show="projectForm.registerMonth.$invalid"
                                     class="help-block">
                                    <p ng-show="projectForm.registerMonth.$error.required">
                                        Kuukausi on pakollinen
                                    </p>
                                </div>
                            </div>
                            <div class="col-md-4"
                                 ng-class="{'has-error': projectForm.registerYear.$invalid }">
                                <input name="registerYear" type="number"
                                       class="form-control"
                                       data-ng-model="register_year"
                                       id="registerYear" required>
                                <div ng-show="projectForm.registerYear.$invalid"
                                     class="help-block">
                                    <p ng-show="projectForm.registerYear.$error.required">
                                        Vuosi on pakollinen
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group col-md-6">
                        <label for="security_level"
                               class="col-md-3 control-label">
                            {{fieldNames["security_level"]}}
                        </label>
                        <div class="col-md-9">
                            <select id="security_level"
                                    data-ng-model="project.security_level">
                                <option data-ng-repeat="sec_level in securityLevels">{{sec_level}}</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="form-group col-md-6" data-ng-show="!newOrg">
                    <label class="col-md-3 control-label">
                        {{fieldNames["organisation"]}}
                    </label>
                    <div data-ng-if="!newOrg" class="col-md-9" id="orgSelection"
                         data-ng-init="addOrgFromDb()">
                        <select data-ng-if="!newOrg"
                                data-ng-model="project.listOrganisation">
                            <option data-ng-if="!newOrg"
                                    data-ng-repeat="org in orgs"
                                    value="{{org._id}}">
                                {{org.name}}
                            </option>
                        </select>
                    </div>
                </div>
                <div data-ng-show="!newOrg" class="form-group col-md-6">
                    <input type="button" id="addOrg" data-ng-click="addNewOrg()"
                           value="Lisää uusi järjestö"/>
                </div>
                <div data-ng-show="newOrg" class="form-group col-md-12">
                    <input type="button" id="addOrgFromList"
                           data-ng-click="addOrgFromDb()"
                           value="Lisää järjestö listalta"/>
                </div>
                <article class="well-lg" data-ng-show="newOrg">
                    <fieldset class="panel panel-primary">
                        <div class="panel-heading">
                            <h5>
                                <span ng-click="showOrgInfo = !showOrgInfo">
                                    <span class="glyphicon"
                                          ng-class="showOrgInfo ? 'glyphicon-collapse-down' : 'glyphicon-collapse-up'">
                                    </span>
                                    Järjestö
                                </span>
                            </h5>
                        </div>
                        <div ng-show="showOrgInfo" class="panel-body">
                            <div class="form-group col-md-6"
                                 ng-class="{'has-error': projectForm.orgname.$invalid}">
                                <label class="col-md-3 control-label">Nimi</label>
                                <div class="col-md-9">
                                    <input data-ng-if="newOrg" name="orgname"
                                           type="text" class="form-control"
                                           data-ng-model="project.organisation.name"
                                           id="orgname" required>
                                    <div ng-show="projectForm.orgname.$invalid"
                                         class="help-block">
                                        <p ng-show="projectForm.orgname.$error.required">
                                            Kenttä on pakollinen
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group col-md-6"
                                 ng-class="{'has-error': projectForm.orgrepName.$invalid}">
                                <label class="col-md-3 control-label">Edustaja</label>
                                <div class="col-md-9">
                                    <input data-ng-if="newOrg" name="orgrepName"
                                           type="text" class="form-control"
                                           data-ng-model="project.organisation.representative.name"
                                           id="orgrepName"
                                           placeholder="Nimi"
                                           required>
                                    <div ng-show="projectForm.orgrepName.$invalid"
                                         class="help-block">
                                        <p ng-show="projectForm.orgrepName.$error.required">
                                            Kenttä on pakollinen
                                        </p>
                                    </div>
                                </div>
                                <div class="col-md-9" style="float: right"
                                     ng-class="{'has-error': projectForm.orgrepEmail.$invalid}">
                                    <input data-ng-if="newOrg" name="orgrepEmail"
                                           type="text" class="form-control"
                                           data-ng-model="project.organisation.representative.email"
                                           id="orgrep"
                                           placeholder="Sähköpostiosoite"
                                           required>
                                    <div ng-show="projectForm.orgrepEmail.$invalid"
                                         class="help-block">
                                        <p ng-show="projectForm.orgrepEmail.$error.required">
                                            Kenttä on pakollinen
                                        </p>
                                    </div>
                                </div>
                                <div class="col-md-9" style="float: right"
                                     ng-class="{'has-error': projectForm.orgrepPhone.$invalid}">
                                    <input data-ng-if="newOrg" name="orgrepPhone"
                                           type="text" class="form-control"
                                           data-ng-model="project.organisation.representative.phone"
                                           placeholder="Puhelinnumero"
                                           id="orgrepPhone" required>
                                    <div ng-show="projectForm.orgrepPhone.$invalid"
                                         class="help-block">
                                        <p ng-show="projectForm.orgrepPhone.$error.required">
                                            Kenttä on pakollinen
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group col-md-6">
                                <div class="form-group"
                                     ng-class="{'has-error': projectForm.orgaddr.$invalid}">
                                    <label class="col-md-3 control-label">Osoite</label>
                                    <div class="col-md-9">
                                        <input data-ng-if="newOrg" name="orgaddr"
                                               type="text" class="form-control"
                                               data-ng-model="project.organisation.address.street"
                                               id="orgaddr" required>
                                        <div ng-show="projectForm.orgaddr.$invalid"
                                             class="help-block">
                                            <p ng-show="projectForm.orgaddr.$error.required">
                                                Kenttä on pakollinen
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group"
                                     ng-class="{'has-error': projectForm.orgaddrcode.$invalid}">
                                    <label class="col-md-3 control-label">Postinumero</label>
                                    <div class="col-md-9">
                                        <input data-ng-if="newOrg" name="orgaddrcode"
                                               type="text" class="form-control"
                                               data-ng-model="project.organisation.address.postal_code"
                                               id="orgaddrcode" required>
                                        <div ng-show="projectForm.orgaddrcode.$invalid"
                                             class="help-block">
                                            <p ng-show="projectForm.orgaddrcode.$error.required">
                                                Kenttä on pakollinen
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group"
                                     ng-class="{'has-error': projectForm.orgaddrcity.$invalid}">
                                    <label  class="col-md-3 control-label">Kaupunki</label>
                                    <div class="col-md-9">
                                        <input data-ng-if="newOrg" name="orgaddrcity"
                                               type="text" class="form-control"
                                               data-ng-model="project.organisation.address.city"
                                               id="orgaddrcity" required>
                                        <div ng-show="projectForm.orgaddrcity.$invalid"
                                             class="help-block">
                                            <p ng-show="projectForm.orgaddrcity.$error.required">
                                                Kenttä on pakollinen
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group"
                                     ng-class="{'has-error': projectForm.orgaddrcntry.$invalid}">
                                    <label  class="col-md-3 control-label">Maa</label>
                                    <div class="col-md-9">
                                        <input data-ng-if="newOrg" name="orgaddrcntry"
                                               type="text" class="form-control"
                                               data-ng-model="project.organisation.address.country"
                                               id="orgaddrcntry" required>
                                        <div ng-show=" projectForm.orgaddrcntry.$invalid"
                                             class="help-block">
                                            <p ng-show="projectForm.orgaddrcntry.$error.required">
                                                Kenttä on pakollinen
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group col-md-6"
                                 ng-class="{'has-error': projectForm.orgtel.$invalid}">
                                <label class="col-md-3 control-label">
                                    Puhelinnumero
                                </label>
                                <div class="col-md-9">
                                    <input data-ng-if="newOrg" name="orgtel" type="text"
                                           class="form-control"
                                           data-ng-model="project.organisation.tel"
                                           id="orgtel" required>
                                    <div ng-show="projectForm.orgtel.$invalid"
                                         class="help-block">
                                        <p ng-show="projectForm.orgtel.$error.required">
                                            Kenttä on pakollinen
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group col-md-6"
                                 ng-class="{'has-error': projectForm.orgemail.$invalid}">
                                <label  class="col-md-3 control-label">
                                    Sähköpostiosoite
                                </label>
                                <div class="col-md-9">
                                    <input data-ng-if="newOrg" name="orgemail"
                                           type="email" class="form-control"
                                           data-ng-model="project.organisation.email"
                                           id="orgemail" required>
                                    <div ng-show="projectForm.orgemail.$invalid"
                                         class="help-block">
                                        <p ng-show="projectForm.orgemail.$error.email">
                                            Syötä oikea sähköpostiosoite
                                        </p>
                                    </div>
                                    <div ng-show="projectForm.orgemail.$invalid"
                                         class="help-block">
                                        <p ng-show="projectForm.orgemail.$error.required">
                                            Kenttä on pakollinen
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group col-md-6">
                                <label  class="col-md-3 control-label">
                                    Websivut
                                </label>
                                <div class="col-md-9">
                                    <input data-ng-if="newOrg" name="orgwww"
                                           type="text" class="form-control"
                                           data-ng-model="project.organisation.website"
                                           id="orgwww">
                                </div>
                            </div>
                        </div>
                    </fieldset>
                    <fieldset class="panel panel-primary">
                        <div class="panel-heading">
                            <h5>
                                <span ng-click="showOrgDetails = !showOrgDetails">
                                    <span class="glyphicon"
                                          ng-class="showOrgDetails ? 'glyphicon-collapse-down' : 'glyphicon-collapse-up'">
                                    </span>
                                    Hakijajärjestön lisätiedot
                                </span>
                            </h5>
                        </div>
                        <div ng-show="showOrgDetails" class="panel-body">
                            <div class="col-md-12">
                                <div class="form-group col-md-6">
                                    <label class="col-md-3 control-label">
                                        Vastuullinen johtaja
                                    </label>
                                    <div class="col-md-9">
                                        <input data-ng-if="newOrg"
                                               name="orgExecMan"
                                               type="text" class="form-control"
                                               data-ng-model="project.organisation.exec_manager"
                                               id="orgExecMan">
                                    </div>
                                </div>
                                <div class="form-group col-md-6">
                                    <label class="col-md-3 control-label">
                                        Viestintävastaava
                                    </label>
                                    <div class="col-md-9">
                                        <input data-ng-if="newOrg"
                                               name="orgCommRep"
                                               type="text" class="form-control"
                                               data-ng-model="project.organisation.communications_rep"
                                               id="orgCommRep">
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="form-group col-md-6">
                                    <label for="orgLegal"
                                           class="col-md-3 control-label">
                                        Hallintomalli ja henkilöstö
                                    </label>
                                    <div class="col-md-9">
                                        <textarea data-ng-if="newOrg"
                                                  name="orgLegal"
                                                  data-ng-model="project.organisation.legal_status"
                                                  id="orgLegal"
                                                  class="form-control">
                                        </textarea>
                                    </div>
                                </div>
                                <div class="form-group col-md-6">
                                    <label for="orgDescription"
                                           class="col-md-3 control-label">
                                        Tavoitteet ja keskeiset toimintatavat
                                    </label>
                                    <div class="col-md-9">
                                        <textarea data-ng-if="newOrg"
                                                  name="orgDescription"
                                                  data-ng-model="project.organisation.description"
                                                  id="orgDescription"
                                                  class="form-control">
                                        </textarea>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="form-group col-md-6">
                                    <label for="orgLinks"
                                           class="col-md-3 control-label">
                                        Kansainväliset yhteydet
                                    </label>
                                    <div class="col-md-9">
                                        <textarea data-ng-if="newOrg"
                                                  name="orgLinks"
                                                  data-ng-model="project.organisation.int_links"
                                                  id="orgLinks"
                                                  class="form-control">
                                        </textarea>
                                    </div>
                                </div>
                                <div class="form-group col-md-6">
                                    <label for="orgNatLocLinks"
                                           class="col-md-3 control-label">
                                        Kansalliset ja paikalliset yhteydet
                                    </label>
                                    <div class="col-md-9">
                                        <textarea data-ng-if="newOrg"
                                                  name="orgNatLocLinks"
                                                  data-ng-model="project.organisation.nat_local_links"
                                                  id="orgNatLocLinks"
                                                  class="form-control">
                                        </textarea>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="form-group col-md-6">
                                    <label for="orgOthFund"
                                           class="col-md-3 control-label">
                                        Muut rahoittajat, budjetti
                                    </label>
                                    <div class="col-md-9">
                                        <textarea data-ng-if="newOrg"
                                                  name="orgOthFund"
                                                  data-ng-model="project.organisation.other_funding_budget"
                                                  id="orgOthFund"
                                                  class="form-control">
                                        </textarea>
                                    </div>
                                </div>
                                <div class="form-group col-md-6">
                                    <label for="orgAcct"
                                           class="col-md-3 control-label">
                                        Taloushallinto ja Tilintarkastus
                                    </label>
                                    <div class="col-md-9">
                                        <textarea data-ng-if="newOrg" name="orgAcct"
                                                  data-ng-model="project.organisation.accounting_audit"
                                                  id="orgAcct"
                                                  class="form-control">
                                        </textarea>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="form-group col-md-6">
                                    <label for="org_background"
                                           class="col-md-3 control-label">
                                        Oleelliset taustatiedot
                                    </label>
                                    <div class="col-md-9">
                                        <textarea data-ng-if="newOrg"
                                                  name="org_background"
                                                  data-ng-model="project.organisation.background"
                                                  id="org_background"
                                                  class="form-control">
                                        </textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                    <fieldset class="panel panel-primary">
                        <div class="panel-heading">
                            <h5>
                                <span ng-click="showBankInfo = !showBankInfo">
                                    <span class="glyphicon"
                                          ng-class="showBankInfo ? 'glyphicon-collapse-down' : 'glyphicon-collapse-up'">
                                    </span>
                                    Pankkitili
                                </span>
                            </h5>
                        </div>
                        <div ng-show="showBankInfo" class="panel-body">
                            <div class="form-group">
                                <div class="form-group col-md-6">
                                    <label class="col-md-3 control-label">
                                        Tilinumero (IBAN)
                                    </label>
                                    <div class="col-md-9">
                                        <input data-ng-if="newOrg"
                                               name="bankIban" type="text"
                                               class="form-control"
                                               data-ng-model="project.organisation.bank_account.iban"
                                               id="bankIban">
                                    </div>
                                </div>
                                <div class="form-group col-md-6">
                                    <label class="col-md-3 control-label">
                                        Pankin SWIFT
                                    </label>
                                    <div class="col-md-9">
                                        <input data-ng-if="newOrg"
                                               name="bankSwift" type="text"
                                               class="form-control"
                                               data-ng-model="project.organisation.bank_account.swift"
                                               id="bankSwift">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="form-group col-md-6">
                                    <label class="col-md-3 control-label">
                                        Tilin haltija
                                    </label>
                                    <div class="col-md-9">
                                        <input data-ng-if="newOrg"
                                               name="bankHolder" type="text"
                                               class="form-control"
                                               data-ng-model="project.organisation.bank_account.holder_name"
                                               id="bankHolder">
                                    </div>
                                </div>
                                <div class="form-group col-md-6">
                                    <label class="col-md-3 control-label">
                                        Pankin yhteystiedot
                                    </label>
                                    <div class="col-md-9">
                                        <input data-ng-if="newOrg"
                                               name="bankCont" type="text"
                                               class="form-control"
                                               data-ng-model="project.organisation.bank_account.bank_contact_details"
                                               id="bankCont">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                    <fieldset class="panel panel-primary">
                        <div class="panel-heading">
                            <h5>
                                <span ng-click="showSpecialNotes = !showSpecialNotes">
                                    <span class="glyphicon"
                                          ng-class="showSpecialNotes ? 'glyphicon-collapse-down' : 'glyphicon-collapse-up'">
                                    </span>
                                    Erityishuomioita
                                </span>
                            </h5>
                        </div>
                        <div ng-show="showSpecialNotes" class="panel-body">
                            <div class="form-group col-md-6">
                                <label for="org_special_notes"
                                       class="col-md-3 control-label">
                                    Erityishuomioita
                                </label>
                                <div class="col-md-9">
                                    <textarea data-ng-if="newOrg"
                                              name="org_special_notes"
                                              data-ng-model="project.organisation.special_notes"
                                              id="org_special_notes"
                                              class="form-control">
                                    </textarea>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                </article>
            </div>
        </fieldset>
        <fieldset class="panel panel-primary">
            <div class="panel-heading">
                <h4>
                    <span ng-click="showProjInfo = !showProjInfo">
                        <span class="glyphicon"
                              ng-class="showProjInfo ? 'glyphicon-collapse-down' : 'glyphicon-collapse-up'">
                        </span>
                        Perustiedot
                    </span>
                </h4>
            </div>
            <div ng-show="showProjInfo" class="panel-body">
                <div class="form-group col-md-6">
                    <label for="description"
                           class="col-md-3 control-label">
                        {{fieldNames["description"]}}
                    </label>
                    <div class="col-md-9">
                        <textarea name="description"
                                  data-ng-model="project.description"
                                  id="description" class="form-control">
                        </textarea>
                    </div>
                </div>
                <div class="form-group col-md-6">
                    <label for="description_en" class="col-md-3 control-label">
                        {{fieldNames["description_en"]}}
                    </label>
                    <div class="col-md-9">
                        <textarea name="description_en"
                                  data-ng-model="project.description_en"
                                  id="description_en" class="form-control">
                        </textarea>
                    </div>
                </div>
                <div class="form-group col-md-6">
                    <label class="col-md-4 control-label">
                        {{fieldNames["funding_applied_curr_local"]}}
                    </label>
                    <div class="col-md-4">
                        <input name="appliedlocal" type="number"
                               class="form-control"
                               data-ng-model="project.funding.applied_curr_local"
                               id="appliedlocal" min="0">
                    </div>
                    <div class="col-md-2">
                        <select id="curr_local_unit"
                                data-ng-model="project.funding.curr_local_unit">
                            <option data-ng-repeat="unit in currencyUnits">{{unit}}</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <input type="text"
                               data-ng-model="project.funding.curr_local_unit"
                               class="form-control">
                    </div>
                </div>
                <div class="form-group col-md-6">
                    <label  class="col-md-6 control-label">
                        Haettu avustus (EUR)
                        <!--{{fieldNames["funding_applied_curr_eur"]}}-->
                    </label>
                    <div class="col-md-6">
                        <input name="appliedeur" type="number"
                               class="form-control"
                               data-ng-model="project.funding.applied_curr_eur"
                               id="appliedeur" min="0">
                    </div>
                </div>
                <div class="form-group col-md-6">
                    <label class="col-md-8 control-label">
                        {{fieldNames["duration_months"]}}
                    </label>
                    <div class="col-md-4">
                        <input name="duration" type="number"
                               class="form-control"
                               data-ng-model="project.duration_months"
                               id="duration" min="0">
                    </div>
                </div>
            </div>
        </fieldset>
        <fieldset class="panel panel-primary">
            <div class="panel-heading">
                <h4>
                    <span ng-click="showProjDetails = !showProjDetails">
                        <span class="glyphicon"
                              ng-class="showProjDetails ? 'glyphicon-collapse-down' : 'glyphicon-collapse-up'">
                        </span>
                        Lisätiedot
                    </span>
                </h4>
            </div>
            <div ng-show="showProjDetails" class="panel-body">
                <div class="form-group col-md-12">
                    <label mean-token="'create-methods'"
                           class="control-label">
                        {{fieldNames["methods"]}}
                    </label>
                    <div class="form-group col-md-12">
                        <div class="panel panel-default"
                             style="background-color: #F9F9F9"
                             id="methodsSelection"
                             data-ng-repeat="method in addedMethods">
                            <div class="panel-body">
                                <div class="col-md-7"
                                     ng-class="projectForm['methodSelect' + $index].$invalid ? 'has-error' : ''">
                                    <label class="control-label col-md-2">
                                        Toiminto
                                    </label>
                                    <div class="col-md-10">
                                        <select id="{{'methodSelect' + $index}}"
                                                name="{{'methodSelect' + $index}}"
                                                data-ng-model="method.name"
                                                required>
                                            <option data-ng-repeat="methodName in methodNames"
                                                    value="{{methodName}}">
                                                {{methodName}}
                                            </option>
                                        </select>
                                        <div ng-show="projectForm['methodSelect' + $index].$invalid"
                                             class="help-block">
                                            <p ng-show="projectForm['methodSelect' + $index].$error.required">
                                                Toiminto on pakollinen
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3"
                                     ng-class="projectForm['levelSelect' + $index].$invalid ? 'has-error' : ''">
                                    <label class="control-label col-md-3">
                                        Taso
                                    </label>
                                    <div class="col-md-9">
                                        <select id="{{'levelSelect' + $index}}"
                                                name="{{'levelSelect' + $index}}"
                                                data-ng-model="method.level"
                                                required>
                                            <option data-ng-repeat="methodLevel in methodLevels"
                                                    value="{{methodLevel}}">
                                                {{methodLevel}}
                                            </option>
                                        </select>
                                        <div ng-show="projectForm['levelSelect' + $index].$invalid"
                                             class="help-block">
                                            <p ng-show="projectForm['levelSelect' + $index].$error.required">
                                                Taso on pakollinen
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12"
                                     ng-class="projectForm['methodComment' + $index].$invalid ? 'has-error' : ''"
                                     style="margin-top: 0.5em">
                                    <label class="col-md-1 control-label">
                                        Kuvaus
                                    </label>
                                    <div class="col-md-11">
                                        <textarea id="{{'methodComment' + $index}}"
                                                  name="{{'methodComment' + $index}}"
                                                  data-ng-model="method.comment"
                                                  class="form-control"
                                                  required>
                                        </textarea>
                                        <div ng-show="projectForm['methodComment' + $index].$invalid"
                                             class="help-block">
                                            <p ng-show="projectForm['methodComment' + $index].$error.required">
                                                Kuvaus on pakollinen
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12" style="text-align: center">
                            <button class="btn btn-sm btn-default"
                                    ng-click="removeMethod();">
                                <span class="glyphicon glyphicon-minus">
                                </span>&nbsp;Poista viimeinen
                            </button>
                            <button class="btn btn-sm btn-default"
                                    ng-click="addMethod();">
                                <span class="glyphicon glyphicon-plus">
                                </span>&nbsp;Lisää
                            </button>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <hr>
                        <div class="form-group col-md-4">
                            <label class="col-md-3 control-label" for="country">
                                {{fieldNames["country"]}}
                            </label>
                            <div class="col-md-9">
                                <input name="country" type="text"
                                       class="form-control"
                                       data-ng-model="project.country" id="country">
                            </div>
                        </div>
                        <div class="form-group col-md-4">
                            <label class="col-md-3 control-label" for="region">
                                {{fieldNames["region"]}}
                            </label>
                            <div class="col-md-9">
                                <input name="region" type="text"
                                       class="form-control"
                                       data-ng-model="project.region" id="region">
                            </div>
                        </div>
                        <div class="form-group col-md-4">
                            <label class="col-md-3 control-label" for="dac">
                                {{fieldNames["dac"]}}
                            </label>
                            <div class="col-md-9">
                                <input name="dac" type="text" class="form-control"
                                       data-ng-model="project.dac" id="dac">
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="form-group col-md-6">
                            <label for="project_goal"
                                   class="col-md-3 control-label">
                                {{fieldNames["project_goal"]}}
                            </label>
                            <div class="col-md-9">
                                <textarea name="project_goal"
                                          data-ng-model="project.project_goal"
                                          id="project_goal" class="form-control">
                                </textarea>
                            </div>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="context"
                                   class="col-md-3 control-label">
                                Konteksti
                                <!--{{fieldNames["context"]}}-->
                            </label>
                            <div class="col-md-9">
                                <textarea name="context"
                                          data-ng-model="project.context"
                                          id="context" class="form-control">
                                </textarea>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="form-group col-md-6">
                            <label for="target_group" class="col-md-3 control-label">
                                {{fieldNames["target_group"]}}
                            </label>
                            <div class="col-md-9">
                                <textarea name="target_group"
                                          data-ng-model="project.target_group"
                                          id="target_group" class="form-control">
                                </textarea>
                            </div>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="gender_aspect"
                                   class="col-md-3 control-label">
                                T-A. ja muut teemat
                                <!--{{fieldNames["gender_aspect"]}}-->
                            </label>
                            <div class="col-md-9">
                                <textarea name="gender_aspect"
                                          data-ng-model="project.gender_aspect"
                                          id="gender_aspect" class="form-control">
                                </textarea>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="form-group col-md-6">
                            <label for="vulnerable_groups"
                                   class="col-md-3 control-label">
                                Haavoitt. ryhmien huomiointi
                                <!--{{fieldNames["vulnerable_groups"]}}-->
                            </label>
                            <div class="col-md-9">
                                <textarea name="vulnerable_groups"
                                          data-ng-model="project.vulnerable_groups"
                                          id="vulnerable_groups"
                                          class="form-control">
                                </textarea>
                            </div>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="planned_results"
                                   class="col-md-3 control-label">
                                {{fieldNames["planned_results"]}}
                            </label>

                            <div class="col-md-9">
                                <textarea name="planned_results"
                                          data-ng-model="project.planned_results"
                                          id="planned_results" class="form-control">
                                </textarea>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="form-group col-md-6">
                            <label for="indicators"
                                   class="col-md-3 control-label">
                                {{fieldNames["indicators"]}}
                            </label>
                            <div class="col-md-9">
                                <textarea name="indicators"
                                          data-ng-model="project.indicators"
                                          id="indicators" class="form-control">
                                </textarea>
                            </div>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="risk_control"
                                   class="col-md-3 control-label">
                                {{fieldNames["risk_control"]}}
                            </label>
                            <div class="col-md-9">
                                <textarea name="risk_control"
                                          data-ng-model="project.risk_control"
                                          id="risk_control" class="form-control">
                                </textarea>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="form-group col-md-6">
                            <label for="reporting_evaluation"
                                   class="col-md-3 control-label">
                                {{fieldNames["reporting_evaluation"]}}
                            </label>
                            <div class="col-md-9">
                                <textarea name="reporting_evaluation"
                                          data-ng-model="project.reporting_evaluation"
                                          id="reporting_evaluation"
                                          class="form-control">
                                </textarea>
                            </div>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="human_resources"
                                   class="col-md-3 control-label">
                                {{fieldNames["human_resources"]}}
                            </label>

                            <div class="col-md-9">
                                <textarea name="human_resources"
                                          data-ng-model="project.human_resources"
                                          id="human_resources" class="form-control">
                                </textarea>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="form-group col-md-6">
                            <label for="budget" class="col-md-3 control-label">
                                {{fieldNames["budget"]}}
                            </label>
                            <div class="col-md-9">
                                <textarea name="budget"
                                          data-ng-model="project.budget" id="budget"
                                          class="form-control"></textarea>
                            </div>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="other_donors_proposed"
                                   class="col-md-3 control-label">
                                {{fieldNames["other_donors_proposed"]}}
                            </label>
                            <div class="col-md-9">
                                <textarea name="other_donors_proposed"
                                          data-ng-model="project.other_donors_proposed"
                                          id="other_donors_proposed"
                                          class="form-control">
                                </textarea>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="form-group col-md-6">
                            <label for="referees" class="col-md-3 control-label">
                                {{fieldNames["referees"]}}
                            </label>
                            <div class="col-md-9">
                                <textarea name="referees"
                                          data-ng-model="project.referees"
                                          id="referees" class="form-control">
                                </textarea>
                            </div>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="background_check"
                                   class="col-md-3 control-label">
                                {{fieldNames["background_check"]}}
                            </label>
                            <div class="col-md-9">
                                <textarea name="background_check"
                                          data-ng-model="project.background_check"
                                          id="background_check"
                                          class="form-control">
                                </textarea>
                            </div>
                        </div>
                    </div>
                </div>
        </fieldset>
        <fieldset class="panel panel-primary">
            <div class="panel-heading">
                <h4>
                    <span ng-click="showAssessment = !showAssessment">
                        <span class="glyphicon"
                              ng-class="showAssessment ? 'glyphicon-collapse-down' : 'glyphicon-collapse-up'">
                        </span>
                        KIOSin arvio
                    </span>
                </h4>
            </div>
            <div ng-show="showAssessment" class="panel-body">
                <div class="col-md-12">
                    <div class="form-group col-md-6">
                        <label for="fitness"
                               class="col-md-3 control-label">
                            {{fieldNames["fitness"]}}
                        </label>
                        <div class="col-md-9">
                            <textarea name="fitness"
                                      data-ng-model="project.fitness"
                                      id="fitness" class="form-control">
                            </textarea>
                        </div>
                    </div>
                    <div class="form-group col-md-6">
                        <label for="capacity" class="col-md-3 control-label">
                            {{fieldNames["capacity"]}}
                        </label>
                        <div class="col-md-9">
                            <textarea name="capacity"
                                      data-ng-model="project.capacity"
                                      id="capacity" class="form-control">
                            </textarea>
                        </div>
                    </div>
                </div>
                <div class="col-md-12">
                    <div class="form-group col-md-6">
                        <label for="feasibility"
                               class="col-md-3 control-label">
                            {{fieldNames["feasibility"]}}
                        </label>
                        <div class="col-md-9">
                            <textarea name="feasibility"
                                      data-ng-model="project.feasibility"
                                      id="feasibility" class="form-control">
                            </textarea>
                        </div>
                    </div>
                    <div class="form-group col-md-6">
                        <label for="effectiveness"
                               class="col-md-3 control-label">
                            {{fieldNames["effectiveness"]}}
                        </label>
                        <div class="col-md-9">
                            <textarea name="effectiveness"
                                      data-ng-model="project.effectiveness"
                                      id="effectiveness" class="form-control">
                            </textarea>
                        </div>
                    </div>
                </div>
                <div class="col-md-12">
                    <div class="form-group col-md-6">
                        <label for="proposed_funding"
                               class="col-md-3 control-label">
                            {{fieldNames["proposed_funding"]}}
                        </label>
                        <div class="col-md-9">
                            <textarea name="proposed_funding"
                                      data-ng-model="project.proposed_funding"
                                      id="proposed_funding"
                                      class="form-control">
                            </textarea>
                        </div>
                    </div>
                </div>
            </div>
        </fieldset>
        <fieldset class="panel panel-primary">
            <div class="panel-heading">
                <h4>
                    <span ng-click="showConfirmation = !showConfirmation">
                        <span class="glyphicon"
                              ng-class="showConfirmation ? 'glyphicon-collapse-down' : 'glyphicon-collapse-up'">
                        </span>
                        Vahvistus
                    </span>
                </h4>
            </div>
            <div ng-show="showConfirmation"
                 class="panel-body">
                <div class="col-md-12 form-group">
                    <label for="special_notes"
                           class="col-md-3 control-label">
                        {{fieldNames["special_notes"]}}
                    </label>
                    <div class="col-md-9">
                        <textarea name="special_notes"
                                  data-ng-model="project.special_notes"
                                  id="special_notes"
                                  class="form-control">
                        </textarea>
                    </div>
                </div>
                <div class="form-group col-md-12" style="text-align: center">
                    <hr>
                    <button mean-token="'create-submit'" type="submit"
                            class="btn btn-primary"
                            ng-disabled="projectForm.$invalid">
                        <span class="glyphicon glyphicon-ok">
                        </span>&nbsp;Tallenna
                    </button>
                </div>
            </div>
        </fieldset>
    </form>
</section>
