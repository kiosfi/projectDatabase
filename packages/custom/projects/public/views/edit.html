<section data-ng-controller="ProjectsController" data-ng-init="initEditing()">
    <link rel="stylesheet" type="text/css" href="/theme/assets/css/twoPart.css">
    <h1 id="header">{{project.title}} ({{project.organisation.name}}) – Muokkaus</h1>
    <hr>
    <ul id="menu" class="nav nav-list left-part">
        <li>
            <label><a href="#header">Tilojen&nbsp;tiedot</a></label>
            <ul>
                <li><a href="#fieldset_registered">Rekisteröity</a></li>
                <li ng-show="project.in_review.date">
                    <a href="#fieldset_in_review">Käsittelyssä</a>
                </li>
<!--                <li ng-hide="project.in_review.date">
                    <span class="text-muted">Käsittelyssä</span>
                </li>-->
                <li ng-show="project.approved.date">
                    <a href="#fieldset_approved">Hyväksytty</a>
                </li>
<!--                <li ng-hide="project.approved.date">
                    <span class="text-muted">Hyväksytty</span>
                </li>-->
                <li ng-show="project.rejected.date">
                    <a href="#fieldset_rejected">Hylätty</a>
                </li>
<!--                <li ng-hide="project.rejected.date">
                    <span class="text-muted">Hylätty</span>
                </li>-->
                <li ng-show="project.signed.date">
                    <a href="#fieldset_signed">Allekirjoitettu</a>
                </li>
<!--                <li ng-hide="project.signed.date">
                    <span class="text-muted">Allekirjoitettu</span>
                </li>-->
                <li ng-show="project.intermediary_reports.length > 0">
                    <a href="#fieldset_intreport">Väliraportti</a>
                </li>
<!--                <li ng-hide="project.intermediary_reports.length > 0">
                    <span class="text-muted">Väliraportti</span>
                </li>-->
                <li ng-show="project.end_report.date">
                    <a href="#fieldset_endreport">Loppuraportti</a>
                </li>
<!--                <li ng-hide="project.end_report.date">
                    <span class="text-muted">Loppuraportti</span>
                </li>-->
                <li ng-show="project.ended.date">
                    <a href="#fieldset_ended">Päättynyt</a>
                </li>
<!--                <li ng-hide="project.ended.date">
                    <span class="text-muted">Päättynyt</span>
                </li>-->
            </ul>
            <label><a href="#fieldset_confirm">Vahvistus</a></label>
        </li>
    </ul>
    <form name="projectEditForm" class="form-horizontal" role="form"
          data-ng-submit="update(projectEditForm.$valid)" novalidate>
        <fieldset class="panel panel-primary" id="fieldset_registered">
            <div class="panel-heading">
                <h4>
                    <span href="" ng-click="showRegDetails = !showRegDetails">
                        <span class="glyphicon"
                              ng-class="showRegDetails ? 'glyphicon-collapse-down' : 'glyphicon-collapse-up'">
                        </span>
                        Rekisteröity-tila
                    </span>
                </h4>
            </div>
            <div class="panel-body" ng-show="!showRegDetails">
                <fieldset class="panel panel-primary">
                    <div class="panel-heading">
                        <h5>
                            <span ng-click="showProjInfo = !showProjInfo">
                                <span class="glyphicon"
                                      ng-class="showProjInfo ? 'glyphicon-collapse-down' : 'glyphicon-collapse-up'">
                                </span>
                                Perustiedot
                            </span>
                        </h5>
                    </div>
                    <div ng-show="!showProjInfo" class="panel-body">

                        <div class="form-group">
                            <label for="title" class="col-md-3 control-label">{{fieldNames["title"]}}</label>
                            <div class="col-md-9" ng-class="{'has-error': projectEditForm.title.$invalid}">
                                <input  name="title"
                                        type="text"
                                        class="form-control"
                                        data-ng-model="project.title"
                                        id="title"
                                        required placeholder="Hankkeen nimi">
                                <div    ng-show="projectEditForm.title.$invalid"
                                        class="help-block">
                                    <p ng-show="projectEditForm.title.$error.required">Kenttä on pakollinen</p>
                                </div>
                            </div>
                        </div>
                
                        <div class="form-group">
                            <label for="coordinator" class="col-md-3 control-label">{{fieldNames["coordinator"]}}</label>
                            <div class="col-md-9" ng-class="{'has-error': projectEditForm.coordinator.$invalid}">
                                <input  name="coordinator"
                                        type="text"
                                        class="form-control"
                                        data-ng-model="project.coordinator"
                                        id="coordinator"
                                        required
                                        placeholder="{{fieldNames['coordinator']}}n nimi">
                                <div    ng-show="projectEditForm.coordinator.$invalid"
                                        class="help-block">
                                    <p ng-show="projectEditForm.coordinator.$error.required">Kenttä on pakollinen</p>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="security_level" class="col-md-3 control-label">{{fieldNames["security_level"]}}</label>
                            <div class="col-md-4">
                                <select name="security_level"
                                        class="form-control"
                                        data-ng-model="project.security_level"
                                        id="security_level"
                                        ng-options="sec_level for sec_level in securityLevels"/>
                            </div>
                        </div>

                        <label for="description" class="control-label">{{fieldNames["description"]}}</label>
                        <div class="form-group">
                            <div class="col-md-12">
                                <textarea   class="form-control"
                                            name="description"
                                            data-ng-model="project.description"
                                            id="description"
                                            placeholder="{{fieldNames['description']}}"
                                            rows="6">
                                </textarea>
                            </div>
                        </div>
                        <label for="description_en" class="control-label">{{fieldNames["description_en"]}}</label>                
                        <div class="form-group">
                            <div class="col-md-12">
                                <textarea   class="form-control"
                                            name="description_en"
                                            data-ng-model="project.description_en"
                                            id="description_en"
                                            placeholder="{{fieldNames['description']}} englanniksi"
                                            rows="6">
                                </textarea>
                            </div>
                        </div>


                        <div class="form-group">
                            <label for="appliedlocal" class="col-md-2 control-label">{{fieldNames["funding_applied_curr_local"]}}</label>
                            <div class="col-md-3">
                                <input  class="form-control"
                                        name="appliedlocal"
                                        type="number"
                                        data-ng-model="project.funding.applied_curr_local"
                                        id="appliedlocal"
                                        placeholder="00,00"
                                        min="0">
                            </div>
                            <div class="col-md-2">
                                <select class="form-control"
                                        name="curr_local_unit"
                                        data-ng-model="project.funding.curr_local_unit"
                                        id="curr_local_unit">
                                    <option data-ng-repeat="unit in currencyUnits">{{unit}}</option>
                                </select>                                            
                            </div>
                            <label for="appliedeur" class="col-md-2 control-label">Haettu avustus (EUR)</label>
                            <div class="col-md-3">
                                <input  class="form-control"
                                        name="appliedeur"
                                        type="number"
                                        data-ng-model="project.funding.applied_curr_eur"
                                        id="appliedeur"
                                        placeholder="00,00"
                                        min="0">
                            </div>                    
                        </div>
                        <div class="form-group">
                            <label for="duration" class="col-md-2 control-label">{{fieldNames["duration_months"]}}</label>
                            <div class="col-md-3">
                                <input  class="form-control"
                                        name="duration"
                                        type="number"
                                        data-ng-model="project.duration_months"
                                        id="duration"
                                        placeholder="{{fieldNames['duration_months']}}"
                                        min="0">
                            </div>
                        </div>
                    </div>
                </fieldset>






                <fieldset class="panel panel-primary">
                    <div class="panel-heading">
                        <h5>
                            <span ng-click="showProjDetails = !showProjDetails">
                                <span class="glyphicon"
                                      ng-class="showProjDetails ? 'glyphicon-collapse-down' : 'glyphicon-collapse-up'">
                                </span>
                                Lisätiedot
                            </span>
                        </h5>
                    </div>
                    <div ng-show="!showProjDetails" class="panel-body">

                        <label  class="control-label">{{fieldNames["methods"]}}</label>
                            <div    class="panel panel-default"
                                    style="background-color: #F9F9F9"
                                    id="methodsSelection"
                                    data-ng-repeat="method in addedMethods">        
                                <div class="panel-body">                
                    
            
                                    <div class="form-group">
                                        <div class="col-md-8" ng-class="{'has-error': projectEditForm.{{'methodSelect' + $index}}.$invalid}">
                                            <select class="form-control"
                                                    id="{{'methodSelect' + $index}}"
                                                    name="{{'methodSelect' + $index}}"
                                                    data-ng-model="method.name" required>
                                                <option disabled selected value> -- Valitse toiminto -- </option>
                                                <option
                                                    data-ng-repeat="methodName in methodNames"
                                                    value="{{methodName}}">{{methodName}}</option>
                                            </select>
                                        </div>
                                        <div class="col-md-3" ng-class="{'has-error': projectEditForm.{{'levelSelect' + $index}}.$invalid}">
                                            <select class="form-control"
                                                    id="{{'levelSelect' + $index}}"
                                                    name="{{'levelSelect' + $index}}"
                                                    data-ng-model="method.level" required>
                                                <option disabled selected value> -- Valitse taso -- </option>
                                                <option data-ng-repeat="methodLevel in methodLevels"
                                                        value="{{methodLevel}}">{{methodLevel}}</option>
                                            </select>
                                        </div>
                                    </div>
            
                                    <label  for="{{'methodComment' + $index}}"
                                            class="control-label">Kuvaus</label>
                                    <div class="form-group" ng-class="{'has-error': projectEditForm.{{'methodComment' + $index}}.$invalid}">
                                        <div class="col-md-11">
                                            <textarea   class="form-control" 
                                                        id="{{'methodComment' + $index}}"
                                                        name="{{'methodComment' + $index}}"
                                                        data-ng-model="method.comment"
                                                        placeholder="Kuvaus on pakollinen" required>
                                            </textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
            
                            <div class="form-group" style="text-align: center">
                                <button class="btn btn-sm btn-default"
                                        ng-click="removeMethod();">
                                        <span class="glyphicon glyphicon-minus"></span>&nbsp;Poista viimeinen</button>
                                <button class="btn btn-sm btn-default"
                                        ng-click="addMethod();">
                                        <span class="glyphicon glyphicon-plus"></span>&nbsp;Lisää</button>
                            </div>
            
                                <hr>
            
                                <div class="form-group">
                                    <label for="country" class="col-md-1 control-label">{{fieldNames["country"]}}</label>
                                    <div class="col-md-3">
                                        <input  class="form-control" name="country"
                                                type="text" data-ng-model="project.country"
                                                id="country" placeholder="{{fieldNames['country']}}">
                                    </div>
                                    <label for="region" class="col-md-1 control-label">{{fieldNames["region"]}}</label>
                                    <div class="col-md-3">
                                        <input  class="form-control" name="region"
                                                type="text" data-ng-model="project.region"
                                                id="region" placeholder="{{fieldNames['region']}}">
                                    </div>
                                    <label for="dac" class="col-md-1 control-label">{{fieldNames["dac"]}}</label>
                                    <div class="col-md-3">
                                        <input  class="form-control" name="dac"
                                                type="text" data-ng-model="project.dac"
                                                id="dac" placeholder="{{fieldNames['dac']}}">
                                    </div>
                                </div>
            
                                <div class="form-group">
                                    <label for="project_goal" class="col-md-2 control-label">{{fieldNames["project_goal"]}}</label>
                                    <div class="col-md-10">
                                        <textarea   class="form-control"
                                                    name="project_goal"
                                                    data-ng-model="project.project_goal"
                                                    id="project_goal"
                                                    placeholder="{{fieldNames['project_goal']}}">
                                        </textarea>
                                    </div>
                                </div>
            
                                <div class="form-group">
                                    <label for="context" class="col-md-2 control-label">Konteksti</label>
                                    <div class="col-md-10">
                                        <textarea   class="form-control"
                                                    name="context"
                                                    data-ng-model="project.context"
                                                    id="context"
                                                    placeholder="Konteksti">
                                        </textarea>
                                    </div>
                                </div>
            
                                <div class="form-group">
                                    <label for="target_group" class="col-md-2 control-label">{{fieldNames["target_group"]}}</label>
                                    <div class="col-md-10">
                                        <textarea   class="form-control"
                                                    name="target_group"
                                                    data-ng-model="project.target_group"
                                                    id="target_group"
                                                    placeholder="{{fieldNames['target_group']}}">
                                        </textarea>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="gender_aspect" class="col-md-2 control-label">{{fieldNames["gender_aspect"]}}</label>
                                    <div class="col-md-10">
                                        <textarea   class="form-control"
                                                    name="gender_aspect"
                                                    data-ng-model="project.gender_aspect"
                                                    id="gender_aspect"
                                                    placeholder="{{fieldNames['gender_aspect']}}">
                                        </textarea>
                                    </div>
                                </div>
            
                                <div class="form-group">
                                    <label for="vulnerable_groups" class="col-md-2 control-label">Haavoitt. ryhmien huomiointi</label>
                                    <div class="col-md-10">
                                        <textarea   class="form-control"
                                                    name="vulnerable_groups"
                                                    data-ng-model="project.vulnerable_groups"
                                                    id="vulnerable_groups"
                                                    placeholder="{{fieldNames['vulnerable_groups']}}">
                                        </textarea>
                                    </div>
                                </div>
            
                                <div class="form-group">
                                    <label for="planned_results" class="col-md-2 control-label">{{fieldNames["planned_results"]}}</label>
                                    <div class="col-md-10">
                                        <textarea   class="form-control"
                                                    name="planned_results"
                                                    data-ng-model="project.planned_results"
                                                    id="planned_results"
                                                    placeholder="{{fieldNames['planned_results']}}">
                                        </textarea>
                                    </div>
                                </div>
            
                                <div class="form-group">
                                    <label for="indicators" class="col-md-2 control-label">{{fieldNames["indicators"]}}</label>
                                    <div class="col-md-10">
                                        <textarea   class="form-control"
                                                    name="indicators"
                                                    data-ng-model="project.indicators"
                                                    id="indicators"
                                                    placeholder="{{fieldNames['indicators']}}">
                                        </textarea>
                                    </div>
                                </div>
            
                                <div class="form-group">
                                    <label for="risk_control" class="col-md-2 control-label">Ilmasto- ja ymp. kestäv. huomiointi</label>
                                    <div class="col-md-10">
                                        <textarea   class="form-control"
                                                    name="risk_control"
                                                    data-ng-model="project.risk_control"
                                                    id="risk_control"
                                                    placeholder="{{fieldNames['risk_control']}}">
                                        </textarea>
                                    </div>
                                </div>
            
                                <div class="form-group">
                                    <label for="reporting_evaluation" class="col-md-2 control-label">{{fieldNames["reporting_evaluation"]}}</label>
                                    <div class="col-md-10">
                                        <textarea   class="form-control"
                                                    name="reporting_evaluation"
                                                    data-ng-model="project.reporting_evaluation"
                                                    id="reporting_evaluation"
                                                    placeholder="{{fieldNames['reporting_evaluation']}}">
                                        </textarea>
                                    </div>
                                </div>
            
                                <div class="form-group">
                                    <label for="human_resources" class="col-md-2 control-label">{{fieldNames["human_resources"]}}</label>
                                    <div class="col-md-10">
                                        <textarea   class="form-control"
                                                    name="human_resources"
                                                    data-ng-model="project.human_resources"
                                                    id="human_resources"
                                                    placeholder="{{fieldNames['human_resources']}}">
                                        </textarea>
                                    </div>
                                </div>
            
                                <div class="form-group">
                                    <label for="budget" class="col-md-2 control-label">{{fieldNames["budget"]}}</label>
                                    <div class="col-md-10">
                                        <textarea   class="form-control"
                                                    name="human_resources"
                                                    data-ng-model="project.budget"
                                                    id="budget"
                                                    placeholder="{{fieldNames['budget']}}">
                                        </textarea>
                                    </div>
                                </div>
            
                                <div class="form-group">
                                    <label for="other_donors_proposed" class="col-md-2 control-label">{{fieldNames["other_donors_proposed"]}}</label>
                                    <div class="col-md-10">
                                        <textarea   class="form-control"
                                                    name="other_donors_proposed"
                                                    data-ng-model="project.other_donors_proposed"
                                                    id="other_donors_proposed"
                                                    placeholder="{{fieldNames['other_donors_proposed']}}">
                                        </textarea>
                                    </div>
                                </div>
            
                                <div class="form-group">
                                    <label for="referees" class="col-md-2 control-label">{{fieldNames["referees"]}}</label>
                                    <div class="col-md-10">
                                        <textarea   class="form-control"
                                                    name="referees"
                                                    data-ng-model="project.referees"
                                                    id="referees"
                                                    placeholder="{{fieldNames['referees']}}">
                                        </textarea>
                                    </div>
                                </div>
            
                                <div class="form-group">
                                    <label for="background_check" class="col-md-2 control-label">{{fieldNames["background_check"]}}</label>
                                    <div class="col-md-10">
                                        <textarea   class="form-control"
                                                    name="background_check"
                                                    data-ng-model="project.background_check"
                                                    id="background_check"
                                                    placeholder="{{fieldNames['background_check']}}">
                                        </textarea>
                                    </div>
                                </div>
                        </div>
                    </div>
                </fieldset>
                <fieldset class="panel panel-primary">
                    <div class="panel-heading">
                        <h5>
                            <span ng-click="showAssessment = !showAssessment">
                                <span class="glyphicon"
                                      ng-class="showAssessment ? 'glyphicon-collapse-down' : 'glyphicon-collapse-up'">
                                </span>
                                KIOSin arvio
                            </span>
                        </h5>
                    </div>
                    <div ng-show="!showAssessment" class="panel-body">

                        <div class="form-group">
                            <label for="fitness" class="col-md-2 control-label">{{fieldNames["fitness"]}}</label>
                            <div class="col-md-10">
                                <textarea   class="form-control"
                                            name="fitness"
                                            data-ng-model="project.fitness"
                                            id="fitness"
                                            placeholder="{{fieldNames['fitness']}}">
                                </textarea>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="capacity" class="col-md-2 control-label">{{fieldNames["capacity"]}}</label>
                            <div class="col-md-10">
                                <textarea   class="form-control"
                                            name="capacity"
                                            data-ng-model="project.capacity"
                                            id="capacity"
                                            placeholder="{{fieldNames['capacity']}}">
                                </textarea>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="feasibility" class="col-md-2 control-label">{{fieldNames["feasibility"]}}</label>
                            <div class="col-md-10">
                                <textarea   class="form-control"
                                            name="feasibility"
                                            data-ng-model="project.feasibility"
                                            id="feasibility"
                                            placeholder="{{fieldNames['feasibility']}}">
                                </textarea>
                            </div>
                        </div>    
                        <div class="form-group">
                            <label for="effectiveness" class="col-md-2 control-label">{{fieldNames["effectiveness"]}}</label>
                            <div class="col-md-10">
                                <textarea   class="form-control"
                                            name="effectiveness"
                                            data-ng-model="project.effectiveness"
                                            id="effectiveness"
                                            placeholder="{{fieldNames['effectiveness']}}">
                                </textarea>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="proposed_funding" class="col-md-2 control-label">{{fieldNames["proposed_funding"]}}</label>
                            <div class="col-md-10">
                                <textarea   class="form-control"
                                            name="proposed_funding"
                                            data-ng-model="project.proposed_funding"
                                            id="proposed_funding"
                                            placeholder="{{fieldNames['proposed_funding']}}">
                                </textarea>
                            </div>
                        </div>
                    </div>
                </fieldset>
            </div>
        </fieldset>
        <fieldset ng-show="project.in_review.date" class="panel panel-primary"
                  id="fieldset_in_review">
            <div class="panel-heading">
                <h4>
                    <span href="" ng-click="showInRevDetails = !showInRevDetails">
                        <span class="glyphicon"
                              ng-class="showInRevDetails ? 'glyphicon-collapse-down' : 'glyphicon-collapse-up'">
                        </span>
                        Käsittelyssä-tila
                    </span>
                </h4>
            </div>
            <div class="form-group col-md-12 panel-body"
                 ng-show="showInRevDetails">
                <div class="col-md-6">
                    <label class="col-md-4 control-label">
                        Toimitetut liitteet
                        <!--{{fieldNames["required_appendices"]}}-->
                    </label>
                    <div class="col-md-8">
                        <div class="col-md-12">
                            <span class="col-md-6">
                                <label for="proj_budget"
                                       style="font-weight: normal">
                                    {{fieldNames["required_appendices_proj_budget"]}}
                                </label>
                            </span>
                            <span class="col-md-6">
                                <input type="checkbox" id="proj_budget"
                                       name="proj_budget"
                                       ng-model="project.required_appendices.proj_budget">
                            </span>
                        </div>
                        <div class="col-md-12">
                            <span class="col-md-6">
                                <label for="references" style="font-weight: normal">
                                    {{fieldNames["required_appendices_references"]}}
                                </label>
                            </span>
                            <span class="col-md-6">
                                <input type="checkbox" id="references" name="references"
                                       ng-model="project.required_appendices.references">
                            </span>
                        </div>
                        <div class="col-md-12">
                            <span class="col-md-6">
                                <label for="annual_budget"
                                       style="font-weight: normal">
                                    {{fieldNames["required_appendices_annual_budget"]}}
                                </label>
                            </span>
                            <span class="col-md-6">
                                <input type="checkbox" id="annual_budget"
                                       name="annual_budget"
                                       ng-model="project.required_appendices.annual_budget">
                            </span>
                        </div>
                        <div class="col-md-12">
                            <span class="col-md-6">
                                <label for="rules" style="font-weight: normal">
                                    {{fieldNames["required_appendices_rules"]}}
                                </label>
                            </span>
                            <span class="col-md-6">
                                <input type="checkbox" id="rules" name="rules"
                                       ng-model="project.required_appendices.rules">
                            </span>
                        </div>
                        <div class="col-md-12">
                            <span class="col-md-6">
                                <label for="reg_cert" style="font-weight: normal">
                                    {{fieldNames["required_appendices_reg_cert"]}}
                                </label>
                            </span>
                            <span class="col-md-6">
                                <input type="checkbox" id="reg_cert" name="reg_cert"
                                       ng-model="project.required_appendices.reg_cert">
                            </span>
                        </div>
                        <div class="col-md-12">
                            <span class="col-md-6">
                                <label for="annual_report"
                                       style="font-weight: normal">
                                    {{fieldNames["required_appendices_annual_report"]}}
                                </label>
                            </span>
                            <span class="col-md-6">
                                <input type="checkbox" id="annual_report"
                                       name="annual_report"
                                       ng-model="project.required_appendices.annual_report">
                            </span>
                        </div>
                        <div class="col-md-12">
                            <span class="col-md-6">
                                <label for="audit_reports"
                                       style="font-weight: normal">
                                    {{fieldNames["required_appendices_audit_reports"]}}
                                </label>
                            </span>
                            <span class="col-md-6">
                                <input type="checkbox" id="audit_reports"
                                       name="audit_reports"
                                       ng-model="project.required_appendices.audit_reports">
                            </span>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <label for="comments" class="col-md-2 control-label">
                        {{fieldNames["in_review_comments"]}}
                    </label>
                    <div class="col-md-10">
                        <textarea name="comments" type="text" class="form-control"
                                  data-ng-model="project.in_review.comments"
                                  id="comments">
                        </textarea>
                    </div>
                </div>
            </div>
        </fieldset>
        <fieldset ng-show="project.approved.date" class="panel panel-primary"
                  id="fieldset_approved">
            <div class="panel-heading">
                <h4>
                    <span href="" ng-click="showApprDetails = !showApprDetails">
                        <span class="glyphicon"
                              ng-class="showApprDetails ? 'glyphicon-collapse-down' : 'glyphicon-collapse-up'">
                        </span>
                        Hyväksytty-tila
                    </span>
                </h4>
            </div>
            <div ng-show="showApprDetails" class="panel-body">
                <div class="form-group col-md-6">
                    <label class="col-md-4 control-label" for="board_meeting">
                        {{fieldNames["approved_board_meeting"]}}
                    </label>
                    <div class="col-md-8">
                        <input id="board_meeting" name="board_meeting"
                               data-ng-model="project.approved.board_meeting"
                               class="form-control">
                    </div>
                </div>
                <div class="form-group col-md-6">
                    <label for="board_notified_day"
                           class="col-md-3 control-label">
                        {{fieldNames["approved_board_notified"]}}
                    </label>
                    <div class="col-md-3"
                         ng-class="{'has-error': projectEditForm.board_notified_day.$invalid}">
                        <input name="board_notified_day" type="number"
                               class="form-control" data-ng-model="notified_day"
                               id="board_notified_day" placeholder="p" min="1"
                               max="31">
                        <div ng-show="projectEditForm.board_notified_day.$invalid"
                             class="help-block">
                            <p ng-show="projectEditForm.board_notified_day.$error.number">
                                Päivän täytyy olla numero
                            </p>
                        </div>
                    </div>
                    <div class="col-md-3"
                         ng-class="{'has-error': projectEditForm.board_notified_month.$invalid}">
                        <input name="board_notified_month" type="number"
                               class="form-control"
                               data-ng-model="notified_month"
                               id="board_notified_month" placeholder="k"
                               min="1" max="12">
                        <div ng-show="projectEditForm.board_notified_month.$invalid"
                             class="help-block">
                            <p ng-show="projectEditForm.board_notified_month.$error.number">
                                Kuukauden täytyy olla numero
                            </p>
                        </div>
                    </div>
                    <div class="col-md-3"
                         ng-class="{'has-error': projectEditForm.board_notified_year.$invalid}">
                        <input name="board_notified_year" type="number"
                               class="form-control"
                               data-ng-model="notified_year"
                               id="board_notified_year"
                               placeholder="vvvv" min="0">
                        <div ng-show="projectEditForm.board_notified_year.$invalid"
                             class="help-block">
                            <p ng-show="projectEditForm.board_notified_year.$error.number">
                                Vuoden täytyy olla numero
                            </p>
                        </div>
                    </div>
                </div>
                <div class="form-group col-md-12">
                    <label class="col-md-2 control-label">
                        {{fieldNames["approved_themes"]}}
                    </label>
                    <div class="col-md-10">
                        <div ng-repeat="theme in themes" class="col-md-12">
                            <input type="checkbox" name="selectedThemes[]"
                                   value="{{theme}}"
                                   ng-checked="themeSelection.indexOf(theme) > -1"
                                   ng-click="toggleThemeSelection(theme)">
                            {{theme}}
                        </div>
                    </div>
                </div>
                <div class="form-group col-md-12">
                    <label for="themes_disambiguation"
                           class="col-md-2 control-label">
                        Oik. fokus; Tarkennus
                    </label>
                    <div class="col-md-10">
                        <input id="themes_disambiguation"
                               name="themes_disambiguation"
                               data-ng-model="project.approved.themes_disambiguation"
                               class="form-control">
                    </div>
                </div>
                <div class="form-group col-md-12">
                    <label class="col-md-2 control-label" for="decision">
                        {{fieldNames["approved_decision"]}}
                    </label>
                    <div class="col-md-10">
                        <textarea id="decision" name="decision"
                                  data-ng-model="project.approved.decision"
                                  class="form-control">
                        </textarea>
                    </div>
                </div>
                <div class="form-group col-md-12">
                    <label for="granted_sum_eur" class="col-md-2 control-label">
                        {{fieldNames["approved_granted_sum_eur"]}}
                    </label>
                    <div class="col-md-2"
                         ng-class="{'has-error': projectEditForm.granted_sum_eur.$invalid }">
                        <input name="granted_sum_eur" type="number"
                               class="form-control"
                               data-ng-model="project.approved.granted_sum_eur"
                               id="granted_sum_eur" placeholder="0">
                        <div ng-show="projectEditForm.granted_sum_eur.$invalid"
                             class="help-block">
                            <p ng-show="projectEditForm.granted_sum_eur.$error.number">
                                Summan täytyy olla numero
                            </p>
                        </div>
                    </div>
                </div>
                <div class="form-group col-md-6">
                    <label for="approved_day" class="col-md-3 control-label">
                        Hyväksymispvm
                        <!--{{fieldNames["approved_approved_date"]}}-->
                    </label>
                    <div class="col-md-3"
                         ng-class="{'has-error': projectEditForm.approved_day.$invalid}">
                        <input name="approved_day" type="number"
                               class="form-control" data-ng-model="approved_day"
                               id="approved_day" placeholder="p" min="1">
                        <div ng-show="projectEditForm.approved_day.$invalid"
                             class="help-block">
                            <p ng-show="projectEditForm.approved_day.$error.number">
                                Päivän täytyy olla numero
                            </p>
                        </div>
                    </div>
                    <div class="col-md-3"
                         ng-class="{'has-error': projectEditForm.approved_month.$invalid}">
                        <input name="approved_month" type="number"
                               class="form-control"
                               data-ng-model="approved_month"
                               id="approved_month" placeholder="kk" min="1">
                        <div ng-show="projectEditForm.approved_month.$invalid"
                             class="help-block">
                            <p ng-show="projectEditForm.approved_month.$error.number">
                                Kuukauden täytyy olla numero
                            </p>
                        </div>
                    </div>
                    <div class="col-md-3"
                         ng-class="{'has-error': projectEditForm.approved_year.$invalid }">
                        <input name="approved_year" type="number"
                               class="form-control"
                               data-ng-model="approved_year" id="approved_year"
                               placeholder="vvvv" min="1">
                        <div ng-show="projectEditForm.approved_year.$invalid"
                             class="help-block">
                            <p ng-show="projectEditForm.approved_year.$error.number">
                                Vuoden täytyy olla numero
                            </p>
                        </div>
                    </div>
                </div>
                <div class="form-group col-md-6"
                     ng-class="{'has-error': projectEditForm.approved_by.$invalid}">
                    <label for="approved_by" class="col-md-3 control-label">
                        {{fieldNames["approved_approved_by"]}}
                    </label>
                    <div class="col-md-9">
                        <select id="approved_by"
                                data-ng-model="project.approved.approved_by"
                                class='form-control'
                                selected="project.approved.approved_by">
                            <option>Toiminnanjohtaja</option>
                            <option>Hallituksen kokous</option>
                            <option>Ulkoministeriö</option>
                        </select>
                    </div>
                </div>
            </div>
        </fieldset>
        <fieldset ng-show="project.rejected.date" class="panel panel-primary"
                  id="fieldset_rejected">
            <div class="panel-heading">
                <h4>
                    <span ng-click="showRejDetails = !showRejDetails">
                        <span class="glyphicon"
                              ng-class="showRejDetails ? 'glyphicon-collapse-down' : 'glyphicon-collapse-up'">
                        </span>
                        Hylätty-tila
                    </span>
                </h4>
            </div>
            <div ng-show="showRejDetails" class="panel-body">
                <div class="form-group col-md-12">
                    <label class="col-md-2">
                        {{fieldNames["rejected_rejection_categories"]}}
                    </label>
                    <div class="col-md-10">
                        <div id="rejSelection"
                             data-ng-repeat="rej in addedRejections">
                            <select name="rejSelect" id="rejSelect"
                                    data-ng-model="rej.rejection">
                                <option data-ng-repeat="rejCat in rejCategories"
                                        value="{{rejCat}}">{{rejCat}}</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-12" style="margin-top: 1em">
                        <a id="remRej" class="btn btn-sm btn-default" href=""
                           ng-click="removeRejection();">
                            <span class="glyphicon glyphicon-minus">
                            </span>&nbsp;Poista viimeinen
                        </a>
                        <a id="addRej" class="btn btn-sm btn-default" href=""
                           ng-click="addRejection();">
                            <span class="glyphicon glyphicon-plus">
                            </span>&nbsp;Lisää
                        </a>
                    </div>
                </div>
                <div class="form-group col-md-12">
                    <hr>
                    <label for="comments" class="col-md-2">
                        {{fieldNames["rejected_rejection_comments"]}}
                    </label>
                    <div class="col-md-10">
                        <textarea name="comments" type="text"
                                  class="form-control"
                                  data-ng-model="project.rejected.rejection_comments"
                                  id="comments">
                        </textarea>
                    </div>
                </div>
            </div>
        </fieldset>
        <fieldset ng-show="project.signed.date" class="panel panel-primary"
                  id="fieldset_signed">
            <div class="panel-heading">
                <h4>
                    <span href="" ng-click="showSignDetails = !showSignDetails">
                        <span class="glyphicon"
                              ng-class="showSignDetails
                                                      ? 'glyphicon-collapse-down' : 'glyphicon-collapse-up'">
                        </span>
                        Allekirjoitettu-tila
                    </span>
                </h4>
            </div>
            <div ng-show="showSignDetails" class="panel-body">
                <div class="form-group col-md-6">
                    <label for="signed_by" class="col-md-4">
                        {{fieldNames["signed_signed_by"]}}
                    </label>
                    <div class="col-md-8">
                        <input name="signed_by" type="text"
                               class="form-control"
                               data-ng-model="project.signed.signed_by"
                               id="signed_by">
                    </div>
                </div>
                <div class="form-group col-md-6">
                    <label for="signed_date_day" class="col-md-3">
                        Päivämäärä
                        <!--{{fieldNames["signed_signed_date"]}}-->
                    </label>
                    <div class="col-md-3"
                         ng-class="{'has-error': projectEditForm.signed_date_day.$invalid }">
                        <input name="signed_date_day" type="number"
                               class="form-control" data-ng-model="signed_day"
                               id="signed_date_day" placeholder="p"
                               value="{{project.signed.signed_date| date : 'd'}}">
                        <div ng-show="projectEditForm.signed_date_day.$invalid" class="help-block">
                            <p ng-show="projectEditForm.signed_date_day.$error.number">
                                Päivän täytyy olla numero
                            </p>
                        </div>
                    </div>
                    <div class="col-md-3"
                         ng-class="{'has-error': projectEditForm.signed_date_month.$invalid}">
                        <input name="signed_date_month" type="number"
                               class="form-control" data-ng-model="signed_month"
                               id="signed_date_month" placeholder="k"
                               value="{{project.signed.signed_date| date : 'M'}}">
                        <div ng-show="projectEditForm.signed_date_month.$invalid"
                             class="help-block">
                            <p ng-show="projectEditForm.signed_date_month.$error.number">
                                Kuukauden täytyy olla numero
                            </p>
                        </div>
                    </div>
                    <div class="col-md-3"
                         ng-class="{'has-error': projectEditForm.signed_date_year.$invalid}">
                        <input name="signed_date_year" type="number"
                               class="form-control" data-ng-model="signed_year"
                               id="signed_date_year" placeholder="vvvv"
                               value="{{project.signed.signed_date| date : 'yyyy'}}">
                        <div ng-show="projectEditForm.signed_date_year.$invalid"
                             class="help-block">
                            <p ng-show="projectEditForm.signed_date_year.$error.number">
                                Vuoden täytyy olla numero
                            </p>
                        </div>
                    </div>
                </div>
                <div class="col-md-12">
                    <hr>
                    <label for="plannedPaymentSelection">
                        {{fieldNames["signed_planned_payments"]}}
                    </label>
                    myönnetylle avustukselle
                    {{project.approved.granted_sum_eur| currency : "0"}} €
                </div>
                <div class="form-group col-md-12" id="plPayments">
                    <div class="col-md-12" name="plannedPaymentSelection"
                         id="plannedPaymentSelection"
                         data-ng-repeat="plannedPayment in plannedPayments">
                        <div class="col-md-6">
                            <label for="plannedDay" class="col-md-3 control-label">
                                Päivämäärä
                            </label>
                            <div class="col-md-3">
                                <input name="plannedDay" type="number"
                                       class="form-control"
                                       data-ng-model="plannedPayments[$index].planned_day"
                                       id="plannedDay" placeholder="p" min="1">
                            </div>
                            <div class="col-md-3">
                                <input name="plannedMonth" type="number"
                                       class="form-control"
                                       data-ng-model="plannedPayments[$index].planned_month"
                                       id="plannedMonth" placeholder="k"
                                       min="1">
                            </div>
                            <div class="col-md-3">
                                <input name="plannedYear" type="number"
                                       class="form-control"
                                       data-ng-model="plannedPayments[$index].planned_year"
                                       id="plannedYear" placeholder="vvvv"
                                       min="1">
                            </div>
                        </div>
                        <label for="plannedSumEUR"
                               class="col-md-2 control-label">
                            Maksu (EUR)
                        </label>
                        <div class="col-md-2">
                            <input name="plannedSumEUR" type="number"
                                   class="form-control"
                                   data-ng-model="plannedPayments[$index].sum_eur"
                                   id="plannedSumEUR"
                                   placeholder="Summa (EUR)" min="0">
                        </div>
                    </div>
                    <div class="col-md-12" style="margin-top: 1em">
                        <a ng-click="removePlannedPayment();" href=""
                           class="btn btn-sm btn-default">
                            <span class="glyphicon glyphicon-minus">
                            </span>&nbsp;Poista viimeinen
                        </a>
                        <a id="add-btn" class="btn btn-sm btn-default" href=""
                           ng-click="addPlannedPayment();">
                            <span class="glyphicon glyphicon-plus">
                            </span>&nbsp;Lisää
                        </a>
                    </div>
                </div>
                <div class="col-md-12">
                    <hr>
                    <label for="reportDeadlines" class="col-md-12">
                        Raporttien eräpäivät
                    </label>
                </div>
                <div class="form-group col-md-12">
                    <div name="reportDeadlines" id="reportDeadlines"
                         data-ng-repeat="deadline in deadlines">
                        <div class="col-md-6">
                            <label for="dlRep" class="col-md-3 control-label">
                                Raportti
                            </label>
                            <div class="col-md-9">
                                <input name="dlRep" type="text"
                                       class="form-control"
                                       data-ng-model="deadlines[$index].report"
                                       id="dlRep" placeholder="Raportti">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <label for="dlDay" class="col-md-3 control-label">
                                Eräpäivä
                            </label>
                            <div class="col-md-3">
                                <input name="dlDay" type="number"
                                       class="form-control"
                                       data-ng-model="deadlines[$index].deadline_day"
                                       id="dlDay" placeholder="p" min="1">
                            </div>
                            <div class="col-md-3">
                                <input name="dlMonth" type="number"
                                       class="form-control"
                                       data-ng-model="deadlines[$index].deadline_month"
                                       id="dlMonth" placeholder="k" min="1">
                            </div>
                            <div class="col-md-3">
                                <input name="dlYear" type="number"
                                       class="form-control"
                                       data-ng-model="deadlines[$index].deadline_year"
                                       id="dlYear" placeholder="vvvv" min="1">
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12" style="margin-top: 1em">
                        <a class="btn btn-sm btn-default" href=""
                           ng-click="removeDeadline();">
                            <span class="glyphicon glyphicon-minus">
                            </span>&nbsp;Poista viimeinen
                        </a>
                        <a id="add-btn2" class="btn btn-sm btn-default" href=""
                           ng-click="addDeadline();">
                            <span class="glyphicon glyphicon-plus">
                            </span>&nbsp;Lisää
                        </a>
                    </div>
                </div>
            </div>
        </fieldset>
        <fieldset ng-show="project.intermediary_reports.length > 0"
                  class="panel panel-primary" id="fieldset_intreport">
            <div class="panel-heading">
                <h4>
                    <span ng-click="showIntRepDetails = !showIntRepDetails">
                        <span class="glyphicon"
                              ng-class="showIntRepDetails ? 'glyphicon-collapse-down' : 'glyphicon-collapse-up'">
                        </span>
                        Väliraportti-tila
                    </span>
                </h4>
            </div>
            <div ng-show="showIntRepDetails" class="panel-body">
                <div data-ng-repeat="intreport in int_reports"
                     class="panel panel-primary">
                    <div class="panel-heading">
                        <h5>
                            <span ng-click="showInt[intreport.reportNumber] = !showInt[intreport.reportNumber]">

                                <span class="glyphicon"
                                      ng-class="showInt[intreport.reportNumber] ? 'glyphicon-collapse-down' : 'glyphicon-collapse-up'">
                                </span>
                                {{intreport.reportNumber}}.&nbsp;väliraportti
                            </span>
                        </h5>
                    </div>
                    <div class="panel-body"
                         ng-show="showInt[intreport.reportNumber]">
                        <label class="col-md-12" ng-show="project.methods.length > 0">
                            Toimintatavat ja niiden toteutuminen
                        </label>
                        <div class="form-group col-md-12"
                             ng-repeat="method in project.methods">
                            <div class="col-md-6" style="text-align: justify">
                                <p><em>{{method.name}} ({{method.level}})</em></p>
                                <span ng-bind-html="handleEmphasis(method.comment)"></span>
                            </div>
                            <div class="col-md-6">
                                <p>&nbsp;</p>
                                <textarea name="intRMethods" type="text"
                                          class="form-control"
                                          data-ng-model="intreport.methods[project.methods.indexOf(method)]"
                                          rows="10" cols="50"
                                          id="intRMethods"
                                          placeholder="Toiminnon toteutuminen">
                                </textarea>
                            </div>
                        </div>
                        <label class="col-md-12">
                            {{fieldNames["project_goal"]}}
                        </label>
                        <div class="form-group col-md-12">
                            <div class="col-md-6" style="text-align: justify">
                                <span ng-bind-html="handleEmphasis(project.project_goal)"></span>
                            </div>
                            <div class="col-md-6">
                                <textarea name="objComments" type="text"
                                          class="form-control"
                                          data-ng-model="intreport.objectives"
                                          id="objComments" rows="10" cols="50">
                                </textarea>
                            </div>
                        </div>
                        <div class="form-group col-md-12">
                            <label for="communication" class="col-md-2">
                                {{fieldNames["intreport_communication"]}}
                            </label>
                            <div class="col-md-10">
                                <textarea name="communication" type="text"
                                          class="form-control"
                                          data-ng-model="intreport.communication"
                                          id="communication">
                                </textarea>
                            </div>
                        </div>
                        <div class="form-group col-md-12">
                            <label for="evaluation" class="col-md-2">
                                {{fieldNames["intreport_evaluation"]}}
                            </label>
                            <div class="col-md-10">
                                <textarea name="evaluation" type="text"
                                          class="form-control"
                                          data-ng-model="intreport.evaluation"
                                          id="evaluation">
                                </textarea>
                            </div>
                        </div>
                        <div class="form-group col-md-12">
                            <label for="budget" class="col-md-2">
                                {{fieldNames["intreport_budget"]}}
                            </label>
                            <div class="col-md-10">
                                <textarea name="budget" type="text"
                                          class="form-control"
                                          data-ng-model="intreport.budget"
                                          id="budget">
                                </textarea>
                            </div>
                        </div>
                        <div class="form-group col-md-12">
                            <label for="overallKios" class="col-md-2">
                                {{fieldNames["intreport_overall_rating_kios"]}}
                            </label>
                            <div class="col-md-10">
                                <textarea name="overallKios" type="text"
                                          class="form-control"
                                          data-ng-model="intreport.overall_rating_kios"
                                          id="overallKios">
                                </textarea>
                            </div>
                        </div>
                        <div class="form-group col-md-12">
                            <label for="comments" class="col-md-2">Päätös</label>
                            <div class="col-md-10">
                                <textarea name="intRComments" type="text"
                                          class="form-control"
                                          data-ng-model="intreport.comments"
                                          id="intRcomments">
                                </textarea>
                            </div>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="intRDateAppr" class="col-md-3">
                                Hyväksymispvm
                            </label>
                            <div class="col-md-3"
                                 ng-class="{'has-error': projectEditForm.intRDateAppr_day.$invalid}">
                                <input name="intRDateAppr_day" type="number"
                                       class="form-control"
                                       data-ng-model="intreport.date_day"
                                       id="intRDateAppr_day" placeholder="p"
                                       min="1" max="31">
                                <div ng-show="projectEditForm.intRDateAppr_day.$invalid"
                                     class="help-block">
                                    <p ng-show="projectEditForm.intRDateAppr_day.$error.number">
                                        Päivän täytyy olla numero
                                    </p>
                                </div>
                            </div>
                            <div class="col-md-3"
                                 ng-class="{'has-error': projectEditForm.intRDateAppr_month.$invalid}">
                                <input name="intRDateAppr_month" type="number"
                                       class="form-control"
                                       data-ng-model="intreport.date_month"
                                       id="intRDateAppr_month" placeholder="k"
                                       min="1" max="12">
                                <div ng-show="projectEditForm.intRDateAppr_month.$invalid"
                                     class="help-block">
                                    <p ng-show="projectEditForm.intRDateAppr_month.$error.number">
                                        Kuukauden täytyy olla numero
                                    </p>
                                </div>
                            </div>
                            <div class="col-md-3"
                                 ng-class="{'has-error': projectEditForm.intRDateAppr_year.$invalid}">
                                <input name="intRDateAppr_year" type="number"
                                       class="form-control"
                                       data-ng-model="intreport.date_year"
                                       id="intRDateAppr_year" placeholder="vvvv"
                                       min="1">
                                <div ng-show="projectEditForm.intRDateAppr_year.$invalid"
                                     class="help-block">
                                    <p ng-show="projectEditForm.intRDateAppr_year.$error.number">
                                        Vuoden täytyy olla numero
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </fieldset>
        <fieldset ng-show="project.end_report.date" class="panel panel-primary"
                  id="fieldset_endreport">
            <div class="panel-heading">
                <h4>
                    <span href="" ng-click="showEndRepDetails = !showEndRepDetails">
                        <span class="glyphicon"
                              ng-class="showEndRepDetails ? 'glyphicon-collapse-down' : 'glyphicon-collapse-up'">
                        </span>
                        Loppuraportti-tila
                    </span>
                </h4>
            </div>
            <div ng-show="showEndRepDetails" class="panel-body">
                <div class="form-group col-md-6">
                    <label class="col-md-4" for="end_board_meeting">
                        {{fieldNames["end_report_board_meeting"]}}
                    </label>
                    <div class="col-md-8">
                        <input id="end_board_meeting" name="end_board_meeting"
                               data-ng-model="project.end_report.board_meeting"
                               class="form-control">
                    </div>
                </div>
                <!--                <div class="form-group col-md-6">
                                    <label for="board_notified_date" class="col-md-3">
                                        Hallitukselle tiedoksi
                                    </label>
                                    <div class="col-md-3"
                                         ng-class="{'has-error': projectEditForm.board_notified_day.$invalid}">
                                        <input name="board_notified_day" type="number"
                                               class="form-control" data-ng-model="board_notified_day"
                                               id="board_notified_day" placeholder="p" min="1">
                                        <div ng-show="projectEditForm.board_notified_day.$invalid"
                                             class="help-block">
                                            <p ng-show="projectEditForm.board_notified_day.$error.number">
                                                Päivän täytyy olla numero
                                            </p>
                                        </div>
                                    </div>
                                    <div class="col-md-3"
                                         ng-class="{'has-error': projectEditForm.board_notified_month.$invalid}">
                                        <input name="board_notified_month" type="number"
                                               class="form-control" data-ng-model="board_notified_month"
                                               id="board_notified_month" placeholder="k" min="1">
                                        <div ng-show="projectEditForm.board_notified_month.$invalid"
                                             class="help-block">
                                            <p ng-show="projectEditForm.board_notified_month.$error.number">
                                                Kuukauden täytyy olla numero
                                            </p>
                                        </div>
                                    </div>
                                    <div class="col-md-3"
                                         ng-class="{'has-error': projectEditForm.board_notified_year.$invalid}">
                                        <input name="board_notified_year" type="number"
                                               class="form-control" data-ng-model="board_notified_year"
                                               id="board_notified_year" placeholder="vvvv" min="1">
                                        <div ng-show="projectEditForm.board_notified_year.$invalid"
                                             class="help-block">
                                            <p ng-show="projectEditForm.board_notified_year.$error.number">
                                                Vuoden täytyy olla numero
                                            </p>
                                        </div>
                                    </div>
                                </div>-->
                <div class="form-group col-md-12">
                    <label for="end_budget" class="col-md-4">
                        {{fieldNames["end_report_budget"]}}
                    </label>
                    <div class="col-md-8">
                        <textarea name="end_budget" type="text"
                                  class="form-control"
                                  data-ng-model="project.end_report.budget"
                                  id="end_budget">
                        </textarea>
                    </div>
                </div>
                <div class="form-group col-md-6">
                    <label for="audit_date" class="col-md-3">
                        Tilintarkastuspvm
                    </label>
                    <div class="col-md-3"
                         ng-class="{'has-error': projectEditForm.audit_day.$invalid}">
                        <input name="audit_day" type="number"
                               class="form-control" data-ng-model="audit_day"
                               id="audit_day" placeholder="p" min="1">
                        <div ng-show="projectEditForm.audit_day.$invalid"
                             class="help-block">
                            <p ng-show="projectEditForm.audit_day.$error.number">
                                Päivän täytyy olla numero
                            </p>
                        </div>
                    </div>
                    <div class="col-md-3"
                         ng-class="{'has-error': projectEditForm.audit_month.$invalid}">
                        <input name="audit_month" type="number"
                               class="form-control" data-ng-model="audit_month"
                               id="audit_month" placeholder="k" min="1">
                        <div ng-show="projectEditForm.audit_month.$invalid"
                             class="help-block">
                            <p ng-show="projectEditForm.audit_month.$error.number">
                                Kuukauden täytyy olla numero
                            </p>
                        </div>
                    </div>
                    <div class="col-md-3"
                         ng-class="{'has-error': projectEditForm.audit_year.$invalid}">
                        <input name="audit_year" type="number"
                               class="form-control" data-ng-model="audit_year"
                               id="audit_year" placeholder="vvvv" min="1">
                        <div ng-show="projectEditForm.audit_year.$invalid"
                             class="help-block">
                            <p ng-show="projectEditForm.audit_year.$error.number">
                                Vuoden täytyy olla numero
                            </p>
                        </div>
                    </div>
                </div>
                <div class="form-group col-md-12">
                    <label for="audit_review" class="col-md-2">
                        Tilintarkastuksen Arvio
                    </label>
                    <div class="col-md-8">
                        <textarea name="audit_review" type="text"
                                  class="form-control"
                                  data-ng-model="project.end_report.audit.review"
                                  id="audit_review">
                        </textarea>
                    </div>
                </div>
                <label class="col-md-12"
                       data-ng-show="project.methods && project.methods.length > 0">
                    {{fieldNames["end_report_methods"]}}
                </label>
                <div class="form-group col-md-12"
                     ng-repeat="method in project.methods">
                    <div class="col-md-6" style="text-align: justify">
                        <p><em>{{method.name}}</em> ({{method.level}})</p>
                        <p ng-bind-html="handleEmphasis(method.comment)"></p>
                    </div>
                    <div class="col-md-6">
                        <p>&nbsp;</p>
                        <textarea name="er_methods" type="text"
                                  class="form-control"
                                  data-ng-model="project.end_report.methods[project.methods.indexOf(method)]"
                                  rows="10" cols="50"
                                  id="er_methods" placeholder="Toiminnon toteutuminen">
                        </textarea>
                    </div>
                </div>
                <label class="col-md-12">
                    {{fieldNames["end_report_planned_results"]}}
                </label>
                <div class="form-group col-md-12">
                    <div class="col-md-6" style="text-align: justify">
                        <p ng-bind-html="handleEmphasis(project.indicators)"></p>
                    </div>
                    <div class="col-md-6">
                        <textarea name="plannedResultsComments" type="text"
                                  class="form-control"
                                  data-ng-model="project.end_report.planned_results"
                                  id="plannedResultsComments" rows="10" cols="50">
                        </textarea>
                    </div>
                </div>
                <label class="col-md-12">
                    {{fieldNames["end_report_indicators"]}}
                </label>
                <div class="form-group col-md-12">
                    <div class="col-md-6" style="text-align: justify">
                        <p ng-bind-html="handleEmphasis(latest_intreport.communication)"></p>
                    </div>
                    <div class="col-md-6">
                        <textarea name="indicatorsComments" type="text"
                                  class="form-control"
                                  data-ng-model="project.end_report.indicators"
                                  id="indicatorsComments" rows="10" cols="50">
                        </textarea>
                    </div>
                </div>
                <label class="col-md-12">
                    Kokonaistavoite
                </label>
                <div class="form-group col-md-12">
                    <div class="col-md-6" style="text-align: justify">
                        <p ng-bind-html="handleEmphasis(project.project_goal)">
                        </p>
                    </div>
                    <div class="col-md-6">
                        <textarea name="objectivesComments" type="text"
                                  class="form-control"
                                  data-ng-model="project.end_report.objective"
                                  id="objectivesComments" rows="10" cols="50">
                        </textarea>
                    </div>
                </div>
                <div class="form-group col-md-12">
                    <div class="col-md-3">
                        <div class="col-md-6">
                            <label for="direct_beneficiaries">
                                {{fieldNames["end_report_direct_beneficiaries"]}}
                                (arvio)
                            </label>
                        </div>
                        <div class="col-md-6">
                            <input id="direct_beneficiaries" name="direct_beneficiaries"
                                   class="form-control"
                                   data-ng-model="project.end_report.direct_beneficiaries">
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="col-md-6">
                            <label for="direct_beneficiaries">
                                {{fieldNames["end_report_indirect_beneficiaries"]}}
                                (arvio)
                            </label>
                        </div>
                        <div class="col-md-6">
                            <input id="indirect_beneficiaries"
                                   name="indirect_beneficiaries" class="form-control"
                                   data-ng-model="project.end_report.indirect_beneficiaries">
                        </div>
                    </div>
                    <div class="col-md-6">
                        <label for="grade" class="col-md-4">
                            {{fieldNames["end_report_grade"]}}
                        </label>
                        <div class="col-md-8">
                            <select name="grade" id="grade"
                                    data-ng-model="project.end_report.grade"
                                    class="form-control">
                                <option value="" selected></option>
                                <option value="4">
                                    4 (Onnistui yli odotusten)
                                </option>
                                <option value="3">
                                    3 (Onnistui suunnitellusti)
                                </option>
                                <option value="2">
                                    2 (Onnistui alle odotusten, ulkoinen syy)
                                </option>
                                <option value="1">
                                    1 (Onnistui alle odotusten, järjestön syy)
                                </option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="form-group col-md-12">
                    <label for="gen_review" class="col-md-2">
                        {{fieldNames["end_report_general_review"]}}
                    </label>
                    <div class="col-md-10">
                        <textarea name="gen_review" type="text"
                                  class="form-control"
                                  data-ng-model="project.end_report.general_review"
                                  id="gen_review">
                        </textarea>
                    </div>
                </div>
                <div class="form-group col-md-12">
                    <label for="proposition" class="col-md-2">
                        {{fieldNames["end_report_proposition"]}}
                    </label>
                    <div class="col-md-10">
                        <textarea name="proposition" type="text"
                                  class="form-control"
                                  data-ng-model="project.end_report.proposition"
                                  id="proposition">
                        </textarea>
                    </div>
                </div>
                <div class="form-group col-md-12">
                    <label for="conclusion" class="col-md-2">
                        {{fieldNames["end_report_conclusion"]}}
                    </label>
                    <div class="col-md-10">
                        <textarea name="conclusion" type="text" class="form-control"
                                  data-ng-model="project.end_report.conclusion"
                                  id="conclusion">
                        </textarea>
                    </div>
                </div>
                <div class="form-group col-md-6">
                    <label for="audit_day" class="col-md-3">
                        Hyväksymispvm
                        <!--{{fieldNames["end_report_approved_date"]}}-->
                    </label>
                    <div class="col-md-3"
                         ng-class="{'has-error': projectEditForm.er_approved_day.$invalid}">
                        <input name="er_approved_day" type="number"
                               class="form-control"
                               data-ng-model="er_approved_day"
                               id="er_approved_day" placeholder="p" min="1">
                        <div ng-show="projectEditForm.er_approved_day.$invalid"
                             class="help-block">
                            <p ng-show="projectEditForm.er_approved_day.$error.number">
                                Päivän täytyy olla numero
                            </p>
                        </div>
                    </div>
                    <div class="col-md-3"
                         ng-class="{'has-error': projectEditForm.er_approved_month.$invalid}">
                        <input name="er_approved_month" type="number"
                               class="form-control"
                               data-ng-model="er_approved_month"
                               id="er_approved_month" placeholder="k" min="1">
                        <div ng-show="projectEditForm.er_approved_month.$invalid"
                             class="help-block">
                            <p ng-show="projectEditForm.er_approved_month.$error.number">
                                Kuukauden täytyy olla numero
                            </p>
                        </div>
                    </div>
                    <div class="col-md-3"
                         ng-class="{'has-error': projectEditForm.er_approved_year.$invalid}">
                        <input name="er_approved_year" type="number"
                               class="form-control"
                               data-ng-model="er_approved_year"
                               id="er_approved_year" placeholder="vvvv" min="1">
                        <div ng-show="projectEditForm.er_approved_year.$invalid"
                             class="help-block">
                            <p ng-show="projectEditForm.er_approved_year.$error.number">
                                Vuoden täytyy olla numero
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </fieldset>
        <fieldset ng-show="project.ended.date" class="panel panel-primary"
                  if="fieldset_ended">
            <div class="panel-heading">
                <h4>
                    <span ng-click="showEndedDetails = !showEndedDetails">
                        <span class="glyphicon"
                              ng-class="showEndedDetails
                                                      ? 'glyphicon-collapse-down' : 'glyphicon-collapse-up'">
                        </span>
                        Päättynyt-tila
                    </span>
                </h4>
            </div>
            <div ng-show="showEndedDetails" class="panel-body">
                <div class="form-group col-md-6">
                    <div>
                        <label for="notifiedDay" class="col-md-3">
                            {{fieldNames["ended_board_notified"]}}
                        </label>
                        <div class="col-md-3">
                            <input name="endNotifiedDay" type="number"
                                   class="form-control"
                                   data-ng-model="end_notified_day"
                                   id="notifiedDay" placeholder="p">
                        </div>
                        <div class="col-md-3">
                            <input name="endNotifiedMonth" type="number"
                                   class="form-control"
                                   data-ng-model="end_notified_month"
                                   id="notifiedMonth" placeholder="k">
                        </div>
                        <div class="col-md-3">
                            <input name="endNotifiedYear" type="number"
                                   class="form-control"
                                   data-ng-model="end_notified_year"
                                   id="notifiedYear" placeholder="vvvv">
                        </div>
                    </div>
                </div>
                <div class="form-group col-md-6">
                    <label for="comments" class="col-md-2">
                        {{fieldNames["ended_other_comments"]}}
                    </label>
                    <div class="col-md-10">
                        <textarea name="endComments" type="text"
                                  class="form-control"
                                  data-ng-model="project.ended.other_comments"
                                  id="comments">
                        </textarea>
                    </div>
                </div>
                <div class="form-group col-md-6">
                    <div>
                        <label for="endDay" class="col-md-3 control-label">
                            Päättymispvm
                            <!--{{fieldNames["ended_end_date"]}}-->
                        </label>
                        <div class="col-md-3">
                            <input name="endDay" type="number"
                                   class="form-control" data-ng-model="end_day"
                                   id="endDay" placeholder="p">
                        </div>
                        <div class="col-md-3">
                            <input name="endMonth" type="number"
                                   class="form-control"
                                   data-ng-model="end_month" id="endMonth"
                                   placeholder="k">
                        </div>
                        <div class="col-md-3">
                            <input name="endYear" type="number"
                                   class="form-control" data-ng-model="end_year"
                                   id="endYear" placeholder="vvvv">
                        </div>
                    </div>
                </div>
                <div class="form-group col-md-6">
                    <label for="approved_by" class="col-md-4">
                        {{fieldNames["ended_approved_by"]}}
                    </label>
                    <div class="col-md-8">
                        <select id="approved_by"
                                data-ng-model="project.ended.approved_by"
                                class='form-control'>
                            <option value="toiminnanjohtaja">
                                Toiminnanjohtaja
                            </option>
                            <option value="hallitus">Hallitus</option>
                        </select>
                    </div>
                </div>
            </div>
        </fieldset>
        <fieldset class="panel panel-primary" id="fieldset_confirm">
            <div class="panel-heading">
                <h4>
                    <span ng-click="showConfirmation = !showConfirmation">
                        <span class="glyphicon" ng-class="showConfirmation ? 'glyphicon-collapse-down' : 'glyphicon-collapse-up'">
                        </span>
                        Vahvistus
                    </span>
                </h4>
            </div>
            <div ng-show="!showConfirmation" class="form-group panel-body">

                <div class="form-group">
                    <label for="special_notes" class="col-md-3 control-label">{{fieldNames["special_notes"]}}</label>
                    <div class="col-md-9">
                        <textarea   class="form-control"
                                    name="special_notes"
                                    data-ng-model="project.special_notes"
                                    id="special_notes"
                                    placeholder="{{fieldNames['special_notes']}}">
                        </textarea>
                    </div>
                </div>

                <div class="form-group">
                    <label for="incomplete" class="col-md-3 control-label">Kesken</label>
                    <div class="col-md-1">
                        <input  class="form-control"
                                type="checkbox"
                                id="incomplete"
                                data-ng-model="project.incomplete">
                    </div>
                </div>
                <hr>
                <div class="form-group col-md-12" style="text-align: center">
                    
                    <a ng-href="/projects/{{project._id}}"
                        class="btn btn-default" style="margin-right: 1em">
                        <span class="glyphicon glyphicon-remove"></span>&nbsp;Peru</a>                    
                    
                    <button type="submit"
                            class="btn btn-primary"
                            ng-disabled="projectEditForm.$invalid">
                        <span class="glyphicon glyphicon-ok"></span>&nbsp;Tallenna
                    </button>
                </div>
            </div>
        </fieldset>
    </form>
</section>
