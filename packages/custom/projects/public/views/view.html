
<section data-ng-controller="ProjectsController" data-ng-init="findOne()">

    <h2 id="projtitle"><span class="name">{{project.project_ref}}: {{project.title}}</span>
        <span>
            <!--                Confirm action here-->

            <a class="btn-lg" id="delete" data-ng-click="confirm(project);">
                <i class="glyphicon glyphicon-trash"></i>
            </a>
        </span>
    </h2>

    <h3>Koordinaattori: <a href="">{{project.coordinator}}</a>
        <span class="tila"><p>{{project.state}}</p></span></h3>

    <hr>

    <article class="proj-body">
        <button type="button" data-ng-model="project.categories" data-ng-repeat="cat in project.categories" disabled>
            <span class="glyphicon glyphicon-tag">
            </span> {{cat}}
        </button>
    </article>


    <article ng-show="state.next.length !== 0 && project.state !== 'hylätty' && project.state !== 'päättynyt'" class="tila ng-hide" data-ng-init="findState()">
        <form name="stateForm" class="states" data-ng-submit="changeState(project.changeTo);">
            <label for="stateSelect">Siirry tilaan: </label>
            <select id="stateSelect" data-ng-model="project.changeTo">
                <option data-ng-repeat="next_state in state.next_states" value="{{next_state}}">{{next_state}}</option>
            </select>
            <button type="submit" class="btn-xs">
                <span class="glyphicon glyphicon-arrow-right"></span>
            </button>
        </form>

    </article>

    <article class="proj-box-left">

        <article class="proj-left">
            <h4 class="proj-header">Kuvaus</h4>
            <span class="proj-body">
                {{project.description}}
            </span>
        </article>

        <article class="proj-div">
            <h4 class="proj-header">Järjestö</h4>
            <section class="proj-body">
                <p>Nimi: <a data-ng-href="/organisations/{{project.organisation._id}}">{{project.organisation.name}}</a></p>
                <p>Edustaja: <a href="">{{project.organisation.representative}}</a>
                <h5>Osoite:</h5>
                <p>{{project.organisation.address.street}}<br>
                    {{project.organisation.address.postal_code}} {{project.organisation.address.city}}<br>
                    {{project.organisation.address.country}}</p>
                <p>Puhelinnumero: {{project.organisation.tel}}</p>
                <p>Sähköposti: {{project.organisation.email}}</p>
                <p>Websivut: {{project.organisation.website}}</p>
            </section>
        </article>

        <article class="proj-div">
            <h4 class="proj-header">Hanketiedot</h4>
            <section class="proj-body">

                <p>Vaikutusalue: {{project.region}}</p>
                <p> DAC: {{project.dac}}
                <p>Tila: {{project.status}}</p>

                <p>Kirjattu: {{project.reg_date| date:'dd.MM.yyyy'}}</p>
                <p ng-show="project.funding.granted_curr_eur" class="ng-hide">Myönnetty: {{project.funding.granted_curr_eur}} EUR ({{project.funding.granted_curr_local}} local)</p>
                <p ng-show="!project.funding.granted_curr_eur" class="ng-hide">Haettu: {{project.funding.applied_curr_eur}} EUR ({{project.funding.applied_curr_local}} local)</p>
                <p>Kesto: {{project.duration_months}} kk</p>
            </section>
        </article>

    </article>

    <article class="proj-box-right">
        <article class="proj-right">

            <button class="btn" onclick="toggleCollapse('visibilityAppinfo')">Hakemustiedot</button>

            <article id="visibilityAppinfo">

                <article class="proj">
                    <h4 class="proj-header">Hankkeen taustat</h4>
                    <span class="proj-body">
                        {{project.background}}
                    </span>
                </article>


                <article class="proj">
                    <h4 class="proj-header">Hankkeen tavoite</h4>
                    <span class="proj-body">
                        {{project.project_goal}}
                    </span>
                </article>


                <article class="proj">
                    <h4 class="proj-header">Hyödynsaajat ja vastuunkantajat</h4>
                    <span class="proj-body">
                        {{project.beneficiaries}}
                    </span>
                </article>

                <article class="proj">
                    <h4 class="proj-header">Gender analyysi</h4>
                    <span class="proj-body">
                        {{project.gender_aspect}}
                    </span>
                </article>

                <article class="proj">
                    <h4 class="proj-header">Riskit</h4>
                    <span class="proj-body">
                        {{project.sustainability_risks}}
                    </span>
                </article>

                <article class="proj">
                    <h4 class="proj-header">Evaluointi</h4>
                    <span class="proj-body">
                        {{project.reporting_evaluation}}
                    </span>
                </article>

                <article class="proj">
                    <h4 class="proj-header">Muut haut</h4>
                    <span class="proj-body">
                        {{project.other_donors_proposed}}
                    </span>
                </article>
            </article>
        </article>

        <article class="proj-right">

            <button class="btn" onclick="toggleCollapse('visibilityPayments')">Maksatus</button>
            <article id="visibilityPayments">

                <article class="proj">
                    <p class="proj-header">Myönnetty</p>
                    <section class="proj-body">
                        <p>Summa: {{project.funding.granted_curr_eur}} EUR ({{project.funding.granted_curr_local}} local) 12.10.2014</p>
                        <p>Lisärahoitus: 1000 euroa (10 000 paikallista) 5.7.2014</p>
                    </section>
                    <br>
                    <section class="proj-body">
                        <p class="proj-header">Maksettu</p>
                        <p>1. Erä: 4000 euroa (10 000 paikallista) 7.1.2015</p>
                        <p>2. Erä: 4000 euroa (10 000 paikallista) 7.6.2015</p>
                        <br>
                        <p>Maksettu yhteensä: 8000 euroa (10 000 paikallista) </p>
                        <p>Jäljellä: 3000 euroa (10 000 paikallista) </p>
                    </section>
                </article>
            </article>
        </article>

        <article class="proj-right">
            <button class="btn" onclick="toggleCollapse('visibilityAttachments')">Liitteet</button>

            <article id="visibilityAttachments">
                <h4 class="proj-header">Liitteet</h4>
                <section class="proj-body">
                    <p><a href="">Hakemus</a> - Hyväksytty 1.1.2014</p>
                    <p><a href="">Budjetti</a> - Hyväksytty 1.1.2014</p>
                    <p><a href="">1. väliraportti</a> - Hyväksytty 1.1.2014</p>
                    <p><a href="">2. väliraportti</a> - ODOTTAA</p>
                    <p><a href="">Suosituskirje A</a> - Hyväksytty 1.1.2014</p>
                    <p><a href="">Suosituskirje B</a> - Hyväksytty 1.1.2014</p>
                    <p><a href="">Evaluointi</a> - Hyväksytty 1.1.2014</p>
                    <p><a href="">Esitys 1</a> - Hyväksytty 1.1.2014</p>
                    <p><a href="">Esitys 2</a> - ODOTTAA</p>
                    <p><a href="">Sopimus</a> - Hyväksytty 1.1.2014</p>
                </section>

            </article>
        </article>


    </article>

    <hr>
    <article>
        <h4 class="proj-header">Aikataulu</h4>
            <section ng-show="project.state !== 'rekisteröity'" class="proj-body">
                <b>**Siirtynyt käsittelyyn</b>:&nbsp&nbsp{{project.in_review.date | date:'dd.MM.yyyy'}}&nbsp&nbsp
                <button class="btn" onclick="toggleCollapse('visibilityReviewinfo')">Tiedot</button>
                <span id="visibilityReviewinfo">
                    <h5>Muokkaaja:</h5>
                    <p>{{project.in_review.user.name}}, {{project.in_review.date | date:'dd.MM.yyyy'}}</p>
                    <br>
                    <h5>Kommentit: </h5>
                    <p>{{project.in_review.comments}}</p>
                </span>
            </section>
            <br>
            <section ng-show="project.state === 'hylätty'" class="proj-body">
                <b>**Hanke hylätty</b>:&nbsp&nbsp{{project.rejected.date | date:'dd.MM.yyyy'}}&nbsp&nbsp
                <button class="btn" onclick="toggleCollapse('visibilityRejectedinfo')">Tiedot</button>
                <span id="visibilityRejectedinfo">
                    <h5>Hylkäyksen teki:</h5>
                    <p>{{project.rejected.user.name}}, {{project.rejected.date | date:'dd.MM.yyyy'}}</p>
                    <br>
                    <h5>Hylkäyssyyt:</h5>
                    <p ng-repeat="rej in project.rejected.rejection_categories">{{rej}} </p>
                    <br>
                    <h5>Kommentit: </h5>
                    <p>{{project.rejected.rejection_comments}}</p>
                </span>
            </section>
            <br>
      </article>

</section>

<!--    // Pohja rivin joka on jattu kolmee kolumniin

    <article class="proj-box">
            <article class="proj-div">
                <h4 class="proj-header">1. kolumni</h4>
                <section class="proj-body">

                </section>
            </article>

            <article class="proj-div">
                <h4 class="proj-header">2. kolumni</h4>
                <section class="proj-body">

                </section>
            </article>

            <article class="proj-div">
                <h4 class="proj-header">3. kolumni</h4>
                <section class="proj-body">

                </section>
            </article>
        </article>
-->
